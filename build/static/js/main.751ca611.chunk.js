(this["webpackJsonprumsan-wallet"]=this["webpackJsonprumsan-wallet"]||[]).push([[0],{258:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},259:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"_name","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"name":"_approved","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"approve","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"implementsERC721","outputs":[{"name":"_implementsERC721","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"_totalSupply","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"name":"_tokenId","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"name":"_owner","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_tokenId","type":"uint256"}],"name":"tokenMetadata","outputs":[{"name":"_infoUrl","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"_balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_owner","type":"address"},{"name":"_tokenId","type":"uint256"},{"name":"_approvedAddress","type":"address"},{"name":"_metadata","type":"string"}],"name":"mint","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"_symbol","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_tokenId","type":"uint256"}],"name":"transfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"numTokensTotal","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"getOwnerTokens","outputs":[{"name":"_tokenIds","type":"uint256[]"}],"payable":false,"stateMutability":"view","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_to","type":"address"},{"indexed":true,"name":"_tokenId","type":"uint256"}],"name":"Mint","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_approved","type":"address"},{"indexed":false,"name":"_tokenId","type":"uint256"}],"name":"Approval","type":"event"}]')},40:function(e,t){e.exports={APP_CONSTANTS:{VERSION:1,PASSCODE_LENGTH:6,SCAN_DELAY:600,SCANNER_PREVIEW_STYLE:{height:300,width:400,display:"flex",justifyContent:"center"},SCANNER_CAM_STYLE:{display:"flex",justifyContent:"center",marginTop:"-50px",padding:"50px",marginBottom:"25px"}},BACKUP:{PASSPHRASE_RULE:'"^(?=.*[a-zA-Z])(?=.*[0-9])(?=.{12,})"',GDRIVE_FOLDERNAME:"RumsanWalletBackups"},DB:{NAME:"db_wallet",VERSION:2,TABLES:{DATA:"tbl_data",ASSETS:"tbl_assets",DOCUMENTS:"tbl_docs"}},DEFAULT_TOKEN:{NAME:"Ether",SYMBOL:"ETH"}}},429:function(e,t){},447:function(e,t,n){var a={"./":88,"./erc20":258,"./erc20.json":258,"./erc721":259,"./erc721.json":259,"./index":88,"./index.js":88};function s(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=c,e.exports=s,s.id=447},525:function(e,t){},536:function(e,t){},538:function(e,t){},548:function(e,t){},550:function(e,t){},562:function(e,t){},603:function(e,t){},605:function(e,t){},612:function(e,t){},613:function(e,t){},62:function(e,t){e.exports={INIT_APP:"init_app",SET_NETWORK:"set_network",SET_HASWALLET:"set_haswallet",SET_WALLET:"set_wallet",SET_SCCANNED_DATA:"set_scanned_eth_address",SET_APP_PASSCODE:"set_app_passcode",SET_SENDING_TOKEN_NAME:"set_sending_token_name",SET_ETH_BALANCE:"set_eth_balance"}},674:function(e,t){},681:function(e,t){},696:function(e,t){},697:function(e,t){},88:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var a=n(58);function s(e){var t=e.wallet,s=e.address,c=e.type,r=function(){return n(447)("./".concat(c))};return{abi:r(),get:function(){return new a.a.Contract(s,r(),t)}}}},893:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),c=n(80),r=n.n(c),i=n(33),l=n(49),o=n(1),u=n.n(o),d=n(13),b=n(15),j=n(35),p=n(62),m=n.n(p),h=function(e,t){switch(t.type){case m.a.INIT_APP:return Object(j.a)(Object(j.a)({},e),{},{address:t.data.address,network:t.data.network,hasWallet:t.data.hasWallet});case m.a.SET_NETWORK:return Object(j.a)(Object(j.a)({},e),{},{network:t.data});case m.a.SET_WALLET:return Object(j.a)(Object(j.a)({},e),{},{wallet:t.data});case m.a.SET_HASWALLET:return Object(j.a)(Object(j.a)({},e),{},{hasWallet:t.data});case m.a.SET_SCCANNED_DATA:return Object(j.a)(Object(j.a)({},e),{},{scannedEthAddress:t.data.address,scannedAmount:t.data.amount?t.data.amount:null});case m.a.SET_SENDING_TOKEN_NAME:return Object(j.a)(Object(j.a)({},e),{},{sendingTokenName:t.data});default:return e}},f=n(174),x=n(40),O=[{name:"rumsan",url:"https://chain.esatya.io",display:"Rumsan Network",default:!0},{name:"rumsan_test",url:"https://testnetwork.esatya.io",display:"Rumsan Test Network"},{name:"mainnet",url:"https://mainnet.infura.io/v3/ae22018377b14a61983be979df457b20",display:"Mainnet (Ethereum)"},{name:"ropsten",url:"https://ropsten.infura.io/v3/ae22018377b14a61983be979df457b20",display:"Ropsten"},{name:"kovan",url:"https://kovan.infura.io/v3/ae22018377b14a61983be979df457b20",display:"Kovan"},{name:"rinkeby",url:"https://rinkeby.infura.io/v3/ae22018377b14a61983be979df457b20",display:"Rinkeby"},{name:"localhost",url:"http://localhost:8545",display:"Ganache (http://localhost:8545)"}],v=function(){return O.find((function(e){return e.default}))},g=function(e){return e?O.find((function(t){return t.name===e})):v()},w=v,y=O,N=new f.a(x.DB.NAME);N.version(x.DB.VERSION).stores({data:"name,data",documents:"hash,type,name,file,encryptedFile,createdAt,inIpfs",assets:"address,type,name,symbol,decimal,balance,network"});var k={save:function(e,t){return N.data.put({name:e,data:t})},get:function(e){return Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.data.get(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",n.data);case 6:case"end":return t.stop()}}),t)})))()},remove:function(e){return N.data.delete(e)},list:function(){return N.data.toArray()},initAppData:function(){var e=this;return Object(d.a)(u.a.mark((function t(){var n,a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getNetwork();case 2:return n=t.sent,t.next=5,e.getAddress();case 5:return a=t.sent,t.next=8,e.getWallet();case 8:return s=t.sent,t.abrupt("return",{network:n,address:a,wallet:s});case 10:case"end":return t.stop()}}),t)})))()},clearAll:function(){return Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.data.clear();case 2:return e.next=4,N.assets.clear();case 4:return e.next=6,N.documents.clear();case 6:case"end":return e.stop()}}),e)})))()},saveNetwork:function(e){return this.save("network",e)},getNetwork:function(){var e=this;return Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("network");case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",w());case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},getIpfs:function(){var e=this;return Object(d.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("ipfsUrl");case 2:return(n=t.sent)||(n="https://upload.dev.rumsan.net"),t.next=6,e.get("ipfsUrlDownload");case 6:return(a=t.sent)||(a="https://ipfs.dev.rumsan.net/ipfs"),t.abrupt("return",{ipfsUrl:n,ipfsDownloadUrl:a});case 9:case"end":return t.stop()}}),t)})))()},saveIpfsUrl:function(e){return this.save("ipfsUrl",e)},saveIpfsDownloadUrl:function(e){return this.save("ipfsUrlDownload",e)},saveAddress:function(e){return localStorage.setItem("address",e),this.save("address",e)},getAddress:function(){return this.get("address")},getAddressFromLocal:function(){return localStorage.getItem("address")},saveWallet:function(e){var t=this;return Object(d.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.save("wallet",e));case 1:case"end":return n.stop()}}),n)})))()},getWallet:function(){return this.get("wallet")},saveDocuments:function(e){return Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Array.isArray(e)||(e=[e]),t.abrupt("return",N.documents.bulkAdd(e));case 2:case"end":return t.stop()}}),t)})))()},getDocument:function(e){return N.documents.get(e)},updateDocument:function(e,t){return Object(d.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",N.documents.update(e,t));case 1:case"end":return n.stop()}}),n)})))()},listDocuments:function(){return N.documents.toArray()},getAsset:function(e){return N.assets.get(e)},getAssetBySymbol:function(e,t){return Object(d.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",N.assets.get({symbol:e}));case 2:if("ETH"!==e.toUpperCase()){n.next=4;break}return n.abrupt("return",N.assets.get({symbol:e}));case 4:return n.abrupt("return",N.assets.filter((function(n){return n.symbol===e&&n.network&&n.network.name===t})).first());case 5:case"end":return n.stop()}}),n)})))()},addDefaultAsset:function(e,t){var n=this;return Object(d.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.getAsset("default");case 2:if(a.sent){a.next=5;break}return a.abrupt("return",N.assets.add({address:"default",symbol:e,name:t,decimal:18,balance:0}));case 5:case"end":return a.stop()}}),a)})))()},addMultiAssets:function(e){return Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Array.isArray(e)||(e=[e]),t.abrupt("return",N.assets.bulkAdd(e));case 2:case"end":return t.stop()}}),t)})))()},saveAsset:function(e){return N.assets.put(e)},updateAsset:function(e,t){return Object(d.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",N.assets.update(e,t));case 1:case"end":return n.stop()}}),n)})))()},listAssets:function(e){return e?N.assets.filter((function(t){return void 0===t.network||t.network.name===e})).toArray():N.assets.toArray()}},A=n(0),S={sendingTokenName:"",address:null,network:null,wallet:null,hasWallet:!0,scannedEthAddress:"",scannedAmount:null},C=Object(a.createContext)(S),E=function(e){var t=e.children,n=Object(a.useReducer)(h,S),s=Object(b.a)(n,2),c=s[0],r=s[1],i=Object(a.useCallback)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.addDefaultAsset(x.DEFAULT_TOKEN.SYMBOL,x.DEFAULT_TOKEN.NAME),k.save("version",x.APP_CONSTANTS.VERSION),e.next=4,k.initAppData();case 4:(t=e.sent).hasWallet=null!==t.wallet,t.hasWallet||localStorage.removeItem("address"),r({type:m.a.INIT_APP,data:t});case 8:case"end":return e.stop()}}),e)}))),[r]);return Object(A.jsx)(C.Provider,{value:{address:c.address,scannedEthAddress:c.scannedEthAddress,scannedAmount:c.scannedAmount,hasWallet:c.hasWallet,network:c.network,wallet:c.wallet,sendingTokenName:c.sendingTokenName,initApp:i,saveSendingTokenName:function(e){r({type:m.a.SET_SENDING_TOKEN_NAME,data:e})},saveScannedAddress:function(e){r({type:m.a.SET_SCCANNED_DATA,data:e})},setHasWallet:function(e){r({type:m.a.SET_HASWALLET,data:e})},setNetwork:function(e){r({type:m.a.SET_NETWORK,data:e})},setWallet:function(e){r({type:m.a.SET_WALLET,data:e})},dispatch:r},children:t})},T=n(404),I=["component","wallet"];var P=function(e){var t=e.component,n=e.wallet,a=Object(T.a)(e,I);return Object(A.jsx)(l.b,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return null!=n?Object(A.jsx)(t,Object(j.a)(Object(j.a)({},e),a)):Object(A.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},R=n(30),F=n.n(R),_=n(26);function M(e){var t=e.currentMenu,n=e.actionButton,a=e.ionIcon,c=a?s.a.createElement(_[a],{className:"ion-icon",style:{fontSize:22}}):"";return Object(A.jsxs)("div",{className:"appHeader bg-primary text-light",children:[Object(A.jsx)("div",{className:"left",children:Object(A.jsx)(i.b,{to:"/",className:"headerButton goBack"})}),c,Object(A.jsx)("div",{className:"pageTitle",children:t||"Home"}),Object(A.jsx)("div",{className:"right",children:void 0!==n?Object(A.jsx)(A.Fragment,{children:n}):Object(A.jsx)(i.b,{to:"/",className:"headerButton"})})]})}var D=n(930),B=n(393);function W(e){var t=e.btnText,n=e.handleSubmit,a=e.modalSize,s=e.showModal,c=e.title,r=e.onHide,i=e.onShow;return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(D.a,{size:a||"md",show:s||!1,onHide:r,onShow:i,children:[c&&Object(A.jsx)(D.a.Header,{children:Object(A.jsx)(D.a.Title,{style:{fontSize:14},children:c})}),Object(A.jsx)(D.a.Body,{children:e.children}),e.showFooter&&Object(A.jsx)(D.a.Footer,{children:Object(A.jsx)(B.a,{variant:"primary",onClick:n,children:t||"Save Changes"})})]})})}var U=n(58),L={isValidMnemonic:U.a.utils.isValidMnemonic,connectProvider:function(e,t){return Object(d.a)(u.a.mark((function n(){var a,s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=4;break}return n.next=3,k.getNetwork();case 3:t=n.sent;case 4:return a=t.url,s=new U.a.providers.JsonRpcProvider(a),n.abrupt("return",e.connect(s));case 7:case"end":return n.stop()}}),n)})))()},loadFromJson:function(e,t){var n=this;return Object(d.a)(u.a.mark((function a(){var s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw Error("Passcode must be set first");case 2:return a.next=4,U.a.Wallet.fromEncryptedJson(t,e.toString());case 4:return s=a.sent,a.abrupt("return",n.connectProvider(s));case 6:case"end":return a.stop()}}),a)})))()},loadWallet:function(e){var t=this;return Object(d.a)(u.a.mark((function n(){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k.getWallet();case 2:return a=n.sent,n.abrupt("return",t.loadFromJson(e,a));case 4:case"end":return n.stop()}}),n)})))()},create:function(e,t){var n=this;return Object(d.a)(u.a.mark((function a(){var s,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}throw Error("Passcode must be set first");case 2:return s=null,s=t?U.a.Wallet.fromMnemonic(t):U.a.Wallet.createRandom(),a.next=6,n.connectProvider(s);case 6:return s=a.sent,a.next=9,s.encrypt(e.toString());case 9:return c=a.sent,a.abrupt("return",{wallet:s,encryptedWallet:c});case 11:case"end":return a.stop()}}),a)})))()},loadFromPrivateKey:function(e){var t=this;return Object(d.a)(u.a.mark((function n(){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",null);case 2:return n.next=4,new U.a.Wallet(e);case 4:if(a=n.sent){n.next=7;break}throw Error("Wallet not found");case 7:return n.abrupt("return",t.connectProvider(a));case 8:case"end":return n.stop()}}),n)})))()}};function H(e){var t=e.showModal,n=e.message;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(D.a,{backdrop:"static",style:{marginTop:100},show:t||!1,children:Object(A.jsx)(D.a.Body,{children:Object(A.jsxs)("div",{className:"text-center",children:[Object(A.jsx)("div",{className:"spinner-border text-success mt-5 in-progress",role:"status"}),Object(A.jsx)("div",{children:n||"Please wait..."})]})})})})}function z(e){var t=e.togglePasscodeModal;return Object(A.jsxs)("div",{id:"appCapsule",children:[Object(A.jsxs)("div",{className:"section full mt-2",children:[Object(A.jsx)("div",{className:"section-title",style:{fontSize:"larger"},children:"Backup your wallet"}),Object(A.jsxs)("div",{className:"content-header mb-05",children:[Object(A.jsx)("b",{style:{color:"red"},children:"Important! Read very carefully."}),Object(A.jsx)("br",{}),"For the privacy and security, this application never sends any of your private key and wallet information to our or any of our server. This means that if you lose or reset your device, we won't be able to recover your wallet or any fund associated with it. Hence, creating backup of your wallet is very important. There are two ways to backup your wallet. You have complete control over your backups."]}),Object(A.jsx)("div",{className:"section-title",children:"Option 1: Write down your 12 secret words (mnemonic)."}),Object(A.jsx)("div",{className:"content-header mb-05",children:"This is the safest way to backup your wallet. Click the button below to reveal your secret words. Check no one is looking your screen. Make sure you write down in a paper (or save in an encrypted file) and store safely. NEVER lose it. If you ever need to restore your wallet use these secret words. You can even use these secret words to restore wallet in other blockchain based wallet. Be careful where you restore your wallet. There a lot of scammers out there."}),Object(A.jsx)("div",{className:"text-center mt-3",children:Object(A.jsx)("button",{className:"btn btn-success btn-lg",id:"btnMnemonic",onClick:t,children:"Backup Secret Words"})}),Object(A.jsx)("div",{className:"section-title mt-3",children:"Option 2: Backup to Google Drive."}),Object(A.jsx)("div",{className:"content-header mb-05",children:"Another easier way to backup is just storing an encrypted form of your wallet in your Google Drive. You still have to remember or write down your 6 digit app passcode, as the app uses this passcode to encrypt the wallet before sending to Google Drive, for security. You will need to sign in with Google and give access to Drive. The app will create a folder called 'eSatyaWalletBackup'. NEVER delete it or any contents within it."}),Object(A.jsx)("div",{className:"text-center mt-3",children:Object(A.jsx)(i.b,{to:"/google/backup",children:Object(A.jsx)("button",{className:"btn btn-danger btn-lg",id:"btnDrive",children:"Backup to Google Drive"})})})]}),Object(A.jsx)("div",{className:"section full mb-2",id:"cmpBackup"})]})}var K=x.APP_CONSTANTS.PASSCODE_LENGTH;function G(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),r=Object(b.a)(c,2),i=r[0],l=r[1],o=Object(a.useState)([]),j=Object(b.a)(o,2),p=j[0],m=j[1],h=Object(a.useState)(!1),f=Object(b.a)(h,2),x=f[0],O=f[1],v=Object(a.useState)(!1),g=Object(b.a)(v,2),w=g[0],y=g[1],N=function(){O(!x)},k=function(){y(!w)},S=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,L.loadWallet(t);case 4:n=e.sent,a=n.mnemonic.phrase.split(" "),m(a),l(!1),k(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),l(!1),s(""),F.a.fire("ERROR",e.t0.message,"error");case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H,{showModal:i,message:"Fetching your 12 words secret. It may take few seconds to load..."}),Object(A.jsx)(W,{title:"Please enter your passcode",showModal:x,ohHide:N,children:Object(A.jsx)("div",{className:"row mb-5",children:Object(A.jsxs)("div",{className:"col",children:[Object(A.jsxs)("p",{children:["Choose a ",K,"-digit passcode."]}),Object(A.jsx)("input",{onChange:function(e){var t=e.target.value;if(s(e.target.value),t.length===K)return N(),S(t)},type:"password",pattern:"[0-9]*",inputMode:"numeric",className:"form-control verify-input passcode",placeholder:"------",maxLength:K,autoComplete:"false",value:n})]})})}),Object(A.jsx)(W,{title:"Here is your 12 words secret. Please write down these words in sequence (using the word number) and store safely",showModal:w,ohHide:k,modalSize:"lg",showFooter:"true",handleSubmit:function(){l(!1),s(""),k()},btnText:"I have written down the secret words",children:Object(A.jsx)("div",{className:"row",children:p.length>0?p.map((function(e,t){return Object(A.jsx)("div",{className:"col-3",children:Object(A.jsx)("div",{className:"form-group boxed",children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsxs)("label",{className:"label",children:["\xa0word: ",t+1]}),Object(A.jsx)("input",{type:"text",className:"form-control",name:"".concat(e).concat(t+1),defaultValue:e,readOnly:!0})]})})},t)})):""})}),Object(A.jsx)(M,{currentMenu:"Backup"}),Object(A.jsx)(z,{togglePasscodeModal:N})]})}function V(){var e=Object(l.g)(),t=Object(a.useContext)(C).setWallet,n=Object(a.useState)(!1),s=Object(b.a)(n,2),c=s[0],r=(s[1],function(){var n=Object(d.a)(u.a.mark((function n(){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L.loadFromPrivateKey("0xea9be389aa0c8dd3907fdb1f004ff7dcc18719654077e1f316099c6e588a39aa");case 2:a=n.sent,t(a),e.push("/");case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}());return setTimeout(r,1e3),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H,{message:"Unlocking your wallet. Please wait...",showModal:c}),Object(A.jsx)("div",{className:"footer-locked",children:Object(A.jsxs)("div",{className:"appBottomMenu",children:[Object(A.jsx)("a",{href:"#target",className:"item",children:Object(A.jsx)("div",{className:"col"})}),Object(A.jsx)("a",{href:"#target",className:"item",children:Object(A.jsx)("div",{className:"col"})}),Object(A.jsx)("a",{title:"Tap here to unlock",href:"#screen",className:"item",id:"btnUnlock",onClick:r,children:Object(A.jsx)("div",{className:"col",children:Object(A.jsx)("div",{className:"action-button large",children:Object(A.jsx)(_.IoLockClosed,{className:"ion-icon"})})})}),Object(A.jsx)("a",{href:"#target",className:"item",children:Object(A.jsx)("div",{className:"col"})}),Object(A.jsx)("a",{href:"#target",className:"item",children:Object(A.jsx)("div",{className:"col"})})]})})]})}var Q=n(122),Y=n.n(Q),J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?s.a.createElement(_[e],Object.assign({className:"ion-icon"},t)):""},q=x.APP_CONSTANTS.SCAN_DELAY,X=x.APP_CONSTANTS.SCANNER_PREVIEW_STYLE,Z=x.APP_CONSTANTS.SCANNER_CAM_STYLE;function $(){var e=Object(l.g)(),t=Object(a.useContext)(C),n=t.saveScannedAddress,s=t.wallet,c=t.network,r=Object(a.useState)(!1),o=Object(b.a)(r,2),j=o[0],p=o[1],m=function(){return p(!j)},h=function(e){s.signMessage(e.token).then((function(t){var n={id:e.id,signature:t};fetch("".concat(e.callbackUrl),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){m(),F.a.fire("SUCCESS","Logged in successfully!","success")})).catch((function(e){F.a.fire("ERROR","Login using wallet failed!","error")}))}))},f=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},x=function(){var t=Object(d.a)(u.a.mark((function t(a){var s,r,i,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null,!a){t.next=34;break}if(!0!==f(a)){t.next=9;break}if(!(s=JSON.parse(a))||"login"!==s.action){t.next=7;break}return t.abrupt("return",h(s));case 7:t.next=34;break;case 9:if(t.prev=9,"0x"!==a.substring(0,2)){t.next=16;break}return n({address:a}),m(),e.push("/select-token"),t.abrupt("return");case 16:if(-1!==a.indexOf(":")){t.next=18;break}throw Error("This QR Code is not supported by Rumsan Wallet.");case 18:return r=a.split(":"),i="ethereum"===r[0]?"ETH":r[0],t.next=22,k.getAssetBySymbol(i,c.name);case 22:if(l=t.sent){t.next=25;break}throw Error("Token with symbol ".concat(i," does not exist in your asset library. Please add asset and try again."));case 25:m(),e.push("/transfer/".concat(l.address,"/").concat(r[1])),t.next=34;break;case 29:t.prev=29,t.t0=t.catch(9),console.log("ERR:",t.t0),m(),F.a.fire("ERROR",t.t0.message,"error");case 34:case"end":return t.stop()}}),t,null,[[9,29]])})));return function(e){return t.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(W,{title:"Scan a QR Code",showModal:j,ohHide:m,children:Object(A.jsx)("div",{style:Z,children:Object(A.jsx)(Y.a,{delay:q,style:X,onError:function(e){alert("Oops, scanning failed. Please try again")},onScan:x})})}),Object(A.jsx)("div",{className:"footer-unlocked",children:Object(A.jsxs)("div",{className:"appBottomMenu",children:[Object(A.jsx)(i.b,{to:"/",className:"item",children:Object(A.jsxs)("div",{className:"col",children:[J("IoHomeOutline"),Object(A.jsx)("strong",{children:"Home"})]})}),Object(A.jsx)(i.b,{to:"/assets",className:"item",children:Object(A.jsxs)("div",{className:"col",children:[J("IoBriefcaseOutline"),Object(A.jsx)("strong",{children:"Assets"})]})}),Object(A.jsx)("a",{href:"#home",className:"item",id:"btnScanner",onClick:m,children:Object(A.jsx)("div",{className:"col",children:Object(A.jsx)("div",{className:"action-button large",children:J("IoQrCodeOutline")})})}),Object(A.jsx)(i.b,{to:"/vault",className:"item",children:Object(A.jsxs)("div",{className:"col",children:[J("IoDocumentOutline"),Object(A.jsx)("strong",{children:"DocVault"})]})}),Object(A.jsx)(i.b,{to:"/profile",className:"item",children:Object(A.jsxs)("div",{className:"col",children:[J("IoOptionsOutline"),Object(A.jsx)("strong",{children:"Profile"})]})})]})})]})}function ee(){var e=Object(a.useContext)(C),t=e.hasWallet,n=e.wallet;return Object(A.jsx)(A.Fragment,{children:t?Object(A.jsxs)(A.Fragment,{children:[null===n&&Object(A.jsx)(V,{}),null!==n&&Object(A.jsx)($,{})]}):""})}function te(){var e=Object(a.useContext)(C),t=e.wallet,n=e.setWallet;return Object(A.jsx)("div",{children:t&&Object(A.jsxs)("div",{className:"appHeader bg-primary scrolled",children:[Object(A.jsx)("div",{className:"left d-none",children:Object(A.jsx)("a",{href:"fake_value",className:"headerButton","data-toggle":"modal","data-target":"#sidebarPanel",children:Object(A.jsx)(_.IoHomeOutline,{className:"ion-icon"})})}),Object(A.jsxs)("div",{className:"pageTitle",children:[Object(A.jsx)("img",{src:"assets/img/icon/rumsan-white-72.png",width:"22",alt:"logo",className:"logo"}),"\xa0 Rumsan Wallet"]}),Object(A.jsx)("div",{className:"right",children:Object(A.jsx)("a",{href:"#lock",title:"Lock wallet",onClick:function(){n(null)},className:"headerButton logout",children:Object(A.jsx)(_.IoWalletOutline,{className:"ion-icon"})})})]})})}var ne=n(88),ae=x.APP_CONSTANTS.SCAN_DELAY,se=x.APP_CONSTANTS.SCANNER_PREVIEW_STYLE,ce=x.APP_CONSTANTS.SCANNER_CAM_STYLE;function re(){var e=Object(a.useContext)(C),t=e.address,n=e.wallet,s=e.network,c=Object(l.g)(),r=Object(a.useState)({}),i=Object(b.a)(r,2),o=i[0],j=i[1],p=Object(a.useState)(!1),m=Object(b.a)(p,2),h=m[0],f=m[1],x=Object(a.useState)(!1),O=Object(b.a)(x,2),v=O[0],g=O[1],w=function(){return g(!v)},y=function(){var e=Object(d.a)(u.a.mark((function e(a){var c,r,i,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(!0),n){e.next=4;break}throw Error("Please unlock the wallet first.");case 4:return c=Object(ne.default)({wallet:n,address:a,type:"erc20"}).get(),e.next=7,c.symbol();case 7:return r=e.sent,e.next=10,c.name();case 10:return i=e.sent,e.next=13,c.decimals();case 13:return l=e.sent,e.next=16,c.balanceOf(t);case 16:o=e.sent,j({address:a,type:"erc20",name:i,symbol:r,decimal:l,balance:o.toNumber(),network:s}),f(!1),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(0),f(!1),j({address:"",name:"",symbol:"",type:"",decimal:"",balance:"",network:null}),F.a.fire("ERROR",e.t0.message,"error");case 26:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.addMultiAssets(o);case 2:j({address:"",name:"",symbol:"",type:"",decimal:"",balance:"",network:null}),c.push("/assets");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.target.value).length>40)){e.next=3;break}return e.abrupt("return",y(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(W,{title:"Scan a QR Code",showModal:v,ohHide:w,children:Object(A.jsx)("div",{style:ce,children:Object(A.jsx)(Y.a,{delay:ae,style:se,onError:function(e){alert("Oops, scanning failed. Please try again")},onScan:function(e){e&&(w(),y(e))}})})}),Object(A.jsx)(H,{showModal:h,message:"Fetching token details. Please wait.."}),Object(A.jsx)(M,{currentMenu:"Import Token"}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsx)("div",{id:"cmpMain",children:Object(A.jsx)("div",{className:"section mt-2 mb-5",children:Object(A.jsxs)("div",{className:"card mt-5",id:"cmpTransfer",children:[Object(A.jsx)("div",{className:"card-body",children:Object(A.jsxs)("form",{children:[Object(A.jsx)("div",{className:"form-group boxed",style:{padding:0},children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",htmlFor:"contractAddress",children:"Token Contract Address:"}),Object(A.jsxs)("div",{className:"input-group mb-3",children:[Object(A.jsx)("input",{type:"text",className:"form-control",id:"contractAddress",name:"contractAddress",placeholder:"Enter token contract address",value:o.address,onChange:S}),Object(A.jsx)("i",{className:"clear-input",children:Object(A.jsx)(_.IoCloseCircle,{className:"ion-icon"})}),Object(A.jsx)("div",{className:"ml-1",children:Object(A.jsx)("button",{onClick:w,type:"button",className:"btn btn-icon btn-primary mr-1 mb-1 btn-scan-address",children:Object(A.jsx)(_.IoQrCodeOutline,{className:"ion-icon"})})})]})]})}),Object(A.jsx)("div",{className:"form-group boxed",style:{padding:0},children:Object(A.jsxs)("div",{className:"row",children:[Object(A.jsx)("div",{className:"col-md-6",style:{marginBottom:10},children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",children:"Token Name:"}),Object(A.jsx)("input",{type:"text",className:"form-control",name:"symbol",value:o.name,readOnly:!0})]})}),Object(A.jsx)("div",{className:"col-md-6",children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",children:"Token Symbol:"}),Object(A.jsx)("input",{type:"text",className:"form-control",name:"symbol",value:o.symbol,readOnly:!0})]})})]})}),Object(A.jsx)("div",{className:"form-group boxed",style:{marginTop:12,padding:0},children:Object(A.jsxs)("div",{className:"row",children:[Object(A.jsx)("div",{className:"col-md-6",style:{marginBottom:10},children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",children:"Decimals of Precision:"}),Object(A.jsx)("input",{type:"number",className:"form-control",name:"decimal",value:o.decimal,readOnly:!0})]})}),Object(A.jsx)("div",{className:"col-md-6",children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",children:"Current Balance:"}),Object(A.jsx)("input",{type:"number",className:"form-control",name:"balance",value:o.balance,readOnly:!0})]})})]})})]})}),o.symbol&&Object(A.jsx)("div",{className:"card-footer text-right",children:Object(A.jsxs)("button",{type:"button",id:"btnAddToken",onClick:N,className:"btn btn-success",children:[Object(A.jsx)(_.IoSendOutline,{className:"ion-icon"})," Add Token"]})})]})})})})]})}var ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAFj0lEQVRoge1ZW2wUVRj+zszsbPfW3QWiQAgBAxRopK0B5MFEMcagRpKGpEAVFGJEaSWhaEsrkiFeYGliH7AEom2BIoU1EROVaCQhGrzFh5YSLqVExQqCqLTdnZ3ZncvxoaxZlx12dmY2Jobvbc/5z//9357LfGcGuIP/Ofb3DFRH3unbUaz8pFiJAeDgwcFS1UXPXPx5dHLI573n5fq5l5zmYJxOmAmFpRFKMUXTKCOryU+LwVE0AV2HBxeB4Pn0bzGhlm/fc2q90zxFERCNnuEB2pGdX4qpbW1tvSEnuYoiQNS4FgBzs9sVRecllhx1kstxAR3R82UgpMmoPy4qD7W2n3rSKT5HBQgCZViNeQ9AiVEMpUBcVg8JAuWc4HRUwNTZF9dRggfyxaWSup8f33/ACU7HBHR3n51EQN8yGx9PKCu2t/cusMvrmACF59oBmD5hqEaJksJHdnkdEbC/Z6CaUFQXOk6S1Ml2bYZtK5G2C5RiilHMhR9HDMezLNHt2AzbM5C2C1bH27UZtgRk2wWrsGMzLAswsgtWYdVmWCY3sgtpUArERAVDV+K4dl2GKKqg1DifVZthaRN3RM+XMTrThxxPXE3TMRJXMDycgqrpAIChyyIAgGUIvD4OAZ8LLHsrNSFAuJRf+kpdxcdFEyAIlJlWNvhl9hNXTmoYHU1hJK6AZv3VaQGZpCUeDgEfB7eb/Vcf72biJHZfWBCIaqaegv3I1NkX11GMFU8pEE8oGB5JQpI10zkoAElSIUkqeJ6F38vB6+VAyJjNCIzZjFozuQqage7us5NUF3dW0/RQ9jK5HbJnIBcylxfHMzTgZ+9vrqv6Id+4gmZgRCPvi8NSKNcysQtNp4jFFMRjCko8HNFSruMAgvnGFXQKxUXls4Skyk4XnwkKQFE0KBrtMxNf+CbuOlHijoffFRNqraZRU3+AmSUEAAxDECzlr48Pls4TGsuvmhlj2Qu17jo/XdXlQ7GEsijfhOQTQAD4fK7UhJC3+o2WqmOF1FGQgK6ewVVg1b41NXNOp9t2tvc9Kif1DknWDP3Q7QS4eZZOCLsjka0LmzNzajqzpPmleQ35aipIwIEDp3w67/lOB74BQ7asrZl5Pd23o72/URKVbSlVv+XhlksAxxGMC7u/eltY9GC6LT2rUkqvCk/Up29cNf83RwUAQFf03L3Q2e8ByKAk4mNTbTU15SnAeH9kCsi1zjPH6RplQkG+trGuosdMPZb2QOfhgXoCsutmigsAtqxZMfODdH/2/hi6LBqu8x3t/Y1SQtmWUsZmLuh3RTdvqFxuthbLm7jzyIUPM29hBDhOGa0hc3+07j39REJUu369LI4Pj3O/vvPVBcI/he/ufywpa/tkWb0r3eZ1u65uaaiYTAgxfU5bFtB19KcQkkovgGkZyVQd6MzeH5kwOr1YjmilpeycxheqBgupw9aVcn90YKGuk5MAXFldN8zuj3QVoaDrxab1lXsKrcH2nbjzyEAzoSTn6xQKnGNBN137I1EVl+hWRdHcueICfv7zlg0VS6zw275N/XJuVgQEX+TqI8AcHeTYjVH1TaPiS9zsjdREbqlVftsCBIHobJJ5GgR5z+xscAzRPQx5WLi5zKzAkfvs6tUzfmfAPAXA/KUAgN/PtzRurDJl2ozg2Ju5Z5bPOAHQVrPxAS//bVP9vIhdXkdf7l66+8prAPk6X5yLZ8SUR3nECU5nX68vXqxSSlaC4k+jGMIS6vWwS4R18xNOcDr+gWPtyhlDlOBZjN1NbkHQx+3cXFd50im+onxiWrti1icgZHd2u9/L9TfVV252kqtoXyljAWyiQG/6N88xssfPL3aap2gCNjw+M6kzTA2AGEMAn9e1rOG58r+KxVc07Ds8sDqyq3/vf13HHRQLfwNh74FmPgThOgAAAABJRU5ErkJggg==";function le(){var e=Object(l.g)(),t=Object(a.useContext)(C).network,n=Object(a.useState)([]),s=Object(b.a)(n,2),c=s[0],r=s[1];Object(a.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.listAssets(t.name);case 2:n=e.sent,a=n.find((function(e){return"default"===e.address})),(n=n.filter((function(e){return"default"!==e.address}))).unshift(a),r(n);case 7:case"end":return e.stop()}}),e)})))()}),[t.name]);return Object(A.jsxs)("div",{id:"appCapsule",children:[Object(A.jsx)(M,{currentMenu:"Select Token"}),Object(A.jsx)("div",{className:"card-body",children:Object(A.jsx)("div",{children:Object(A.jsx)("ul",{className:"listview image-listview",children:c&&c.length>0?c.map((function(t){return Object(A.jsx)("li",{children:Object(A.jsx)("a",{href:"#view",className:"item",onClick:function(n){return function(t,n){t.preventDefault(),e.push("/transfer/"+n)}(n,t.address)},children:Object(A.jsxs)("div",{className:"item",children:[Object(A.jsx)("img",{src:ie,alt:"Token",className:"image"}),Object(A.jsxs)("div",{className:"in",children:[Object(A.jsxs)("div",{children:[t.name||"N/A",Object(A.jsx)("footer",{children:t.symbol})]}),Object(A.jsx)("span",{className:"badge badge-primary",children:t.balance||0})]})]})})},t.symbol)})):Object(A.jsx)("div",{style:{padding:20},children:Object(A.jsx)("span",{children:Object(A.jsx)("small",{children:"Your assets will appear here..."})})})})})})]})}var oe=n(448);function ue(){var e=Object(a.useContext)(C),t=e.hasWallet,n=e.wallet,s=Object(a.useState)(!0),c=Object(b.a)(s,2),r=c[0],i=c[1],o=Object(a.useRef)(),u=function(e){var t=Object(a.useState)(0),n=Object(b.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(0),i=Object(b.a)(r,2),l=i[0],o=i[1];return Object(a.useEffect)((function(){var t=function(){c(e.current.offsetWidth),o(e.current.offsetHeight)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[e]),{width:s,height:l}}(o).width;return setTimeout((function(){i(!1)}),1200),t?Object(A.jsxs)(A.Fragment,{children:[r&&Object(A.jsx)("div",{id:"loader",children:Object(A.jsx)("img",{src:"/assets/img/icon/rumsan-white-72.png",alt:"icon",class:"loading-icon"})}),Object(A.jsxs)("div",{id:"appCapsule",children:[Object(A.jsx)("div",{className:"section wallet-card-section pt-1",children:Object(A.jsx)("div",{className:"card",style:{height:365,paddingLeft:2,paddingRight:2},children:Object(A.jsx)("div",{className:"balance",children:Object(A.jsx)("div",{className:"",children:Object(A.jsx)("div",{className:"card-body text-center mt-3",ref:o,children:null!==n?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(oe,{value:n.address,size:u<200?200:280}),Object(A.jsx)("div",{className:"mt-1",style:{fontSize:13},children:n.address}),Object(A.jsx)("div",{className:"mt-2",style:{fontSize:9,lineHeight:1.5},children:"This QR Code (address) is your unique identity. Use this to receive digital documents, assets or verify your identity."})]}):Object(A.jsx)("div",{children:"Loading..."})})})})})}),Object(A.jsx)("div",{id:"cmpCreateWallet",children:Object(A.jsx)("div",{className:"text-center",children:t&&!n&&Object(A.jsx)("strong",{children:"Tap on lock icon to unlock"})})})]})]}):Object(A.jsx)(l.a,{to:"/setup"})}function de(){var e=Object(a.useContext)(C),t=e.wallet,n=e.setWallet,s=e.setNetwork,c=e.network,r=Object(a.useState)(""),i=Object(b.a)(r,2),l=i[0],o=i[1],j=Object(a.useState)(!1),p=Object(b.a)(j,2),m=p[0],h=p[1],f=Object(a.useState)(null),x=Object(b.a)(f,2),O=x[0],v=x[1],w=Object(a.useState)(""),N=Object(b.a)(w,2),S=N[0],E=N[1],T=function(){var e=Object(d.a)(u.a.mark((function e(a,c){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,"custom"===a?(h(!0),r={name:"custom",url:c,display:"Custom Network"}):(h(!1),r=g(a)),e.next=4,k.saveNetwork(r);case 4:return e.next=6,k.updateAsset("default",{balance:0});case 6:if(s(r),!t){e.next=12;break}return e.next=10,L.connectProvider(t,r);case 10:i=e.sent,n(i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){E("success")},P=function(e){var t=e.target.value;T(t),I()};return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=c,e.t0){e.next=5;break}return e.next=4,k.getNetwork();case 4:e.t0=e.sent;case 5:t=e.t0,n=t.name,a=t.url,"custom"===n&&(o(a),h(!0)),v(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(M,{currentMenu:"Networks"}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsxs)("div",{id:"cmpMain",children:[Object(A.jsxs)("div",{className:"section full mt-2",children:[Object(A.jsx)("div",{className:"section-title",children:"Select an Network:"}),Object(A.jsx)("div",{className:"content-header mb-05",children:"Please note: changing network will show current balance of only the active network"})]}),Object(A.jsxs)("div",{className:"section full mb-2",id:"cmpNetwork",children:[Object(A.jsx)("div",{className:"section-title",children:"Available Networks "}),Object(A.jsx)("div",{className:"wide-block p-0",children:Object(A.jsxs)("form",{autoComplete:"off",children:[Object(A.jsxs)("div",{className:"input-list",children:[y.length&&y.map((function(e){return Object(A.jsxs)("div",{className:"custom-control custom-radio",children:[Object(A.jsx)("input",{checked:!(!O||O!==e.name),type:"radio",id:e.name,name:"selNetwork",onChange:P,value:e.name,className:"custom-control-input active"}),Object(A.jsx)("label",{className:"custom-control-label",htmlFor:e.name,children:e.display})]},e.name)})),Object(A.jsxs)("div",{className:"custom-control custom-radio",children:[Object(A.jsx)("input",{checked:!(!O||"custom"!==O),type:"radio",id:"custom",name:"selNetwork",value:"custom",onChange:P,className:"custom-control-input"}),Object(A.jsx)("label",{className:"custom-control-label",htmlFor:"custom",children:"Custom Network"})]})]}),m&&Object(A.jsx)("div",{className:"form-group boxed",id:"cmpNetworkUrl",style:{display:"s"},children:Object(A.jsxs)("div",{className:"input-wrapper",style:{margin:"0px 55px"},children:[Object(A.jsx)("label",{className:"label",htmlFor:"customNetworkUrl",children:"Enter Network Url"}),Object(A.jsx)("input",{type:"text",className:"form-control",id:"customNetworkUrl",name:"customNetworkUrl",value:l,onChange:function(e){o(e.target.value),T("custom",e.target.value),I()},placeholder:"Ethereum network gateway url",autoComplete:"off"}),Object(A.jsx)("i",{className:"clear-input",children:Object(A.jsx)(_.IoCloseCircle,{className:"ion-icon"})})]})}),"success"===S&&Object(A.jsx)("div",{style:{padding:20,color:"green"},children:"Network updated successfully."})]})})]})]})})]})}function be(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsx)("div",{className:"section mt-2",children:Object(A.jsxs)("div",{className:"profile-head",children:[Object(A.jsx)("div",{className:"avatar",children:Object(A.jsx)("img",{src:"https://secure.gravatar.com/avatar/cdfda85820e903a90a89e02903223376?s=180&d=identicon",alt:"avatar",className:"imaged w64 rounded"})}),Object(A.jsxs)("div",{className:"in",children:[Object(A.jsx)("h3",{className:"name",children:"This is You"}),Object(A.jsx)("h5",{className:"subtext",children:":)"})]})]})})}),Object(A.jsx)("div",{className:"section full mb-2",children:Object(A.jsx)("div",{className:"tab-content",children:Object(A.jsx)("div",{className:"tab-pane fade show active",id:"settings",role:"tabpanel",children:Object(A.jsxs)("ul",{className:"listview image-listview text flush transparent pt-1",children:[Object(A.jsx)("li",{children:Object(A.jsx)("div",{className:"item",children:Object(A.jsxs)("div",{className:"in",children:[Object(A.jsx)("div",{children:"Dark Mode"}),Object(A.jsxs)("div",{className:"custom-control custom-switch",children:[Object(A.jsx)("input",{type:"checkbox",className:"custom-control-input  dark-mode-switch",id:"customSwitch1"}),Object(A.jsx)("label",{className:"custom-control-label",htmlFor:"customSwitch1"})]})]})})}),Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:"/backup",className:"item",children:Object(A.jsx)("div",{className:"in",children:Object(A.jsx)("div",{children:"Backup Wallet"})})})}),Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:"/networks",className:"item",children:Object(A.jsxs)("div",{className:"in",children:[Object(A.jsx)("div",{children:"Current Network"}),Object(A.jsx)("footer",{children:"..."})]})})}),Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:"/settings",className:"item",children:Object(A.jsxs)("div",{className:"in",children:[Object(A.jsx)("div",{children:"Settings"}),Object(A.jsx)("footer",{children:"..."})]})})})]})})})})]})}function je(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(M,{currentMenu:"Settings"}),Object(A.jsx)(be,{})]})}function pe(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(null),r=Object(b.a)(c,2),i=r[0],l=r[1],o=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,s(n),n.length>5?k.saveIpfsUrl(n):k.saveIpfsUrl(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,l(n),n.length>5?k.saveIpfsDownloadUrl(n):k.saveIpfsDownloadUrl(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getIpfs();case 2:t=e.sent,n=t.ipfsUrl,a=t.ipfsDownloadUrl,s(n),l(a);case 7:case"end":return e.stop()}}),e)})))()}),[]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(M,{currentMenu:"Settings"}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsx)("div",{id:"cmpMain",children:Object(A.jsx)("div",{className:"section mt-2 mb-5",children:Object(A.jsx)("div",{className:"card mt-5",id:"cmpTransfer",children:Object(A.jsxs)("div",{className:"card-body",children:[Object(A.jsx)("div",{className:"form-group boxed",style:{padding:0},children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",children:"IPFS Upload Url:"}),Object(A.jsx)("div",{className:"input-group mb-3",children:Object(A.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter full IPFS url (eg: http://localhost:5001)",value:n,onChange:o})})]})}),Object(A.jsx)("div",{className:"form-group boxed",style:{padding:0},children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",children:"IPFS Download Url:"}),Object(A.jsx)("div",{className:"input-group mb-3",children:Object(A.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter IPFS download url (eg: http://localhost:8080/ipfs)",value:i,onChange:j})})]})})]})})})})})]})}var me=x.APP_CONSTANTS.SCAN_DELAY,he=x.APP_CONSTANTS.SCANNER_PREVIEW_STYLE,fe=x.APP_CONSTANTS.SCANNER_CAM_STYLE;function xe(e){var t=Object(a.useContext)(C),n=t.saveScannedAddress,s=t.saveSendingTokenName,c=t.network,r=t.wallet,i=Object(l.g)(),o=e.match.params.contract,j=e.match.params.address,p=Object(a.useState)(null),m=Object(b.a)(p,2),h=m[0],f=m[1],x=Object(a.useState)(""),O=Object(b.a)(x,2),v=O[0],g=O[1],w=Object(a.useState)(""),y=Object(b.a)(w,2),N=y[0],S=y[1],E=Object(a.useState)(!1),T=Object(b.a)(E,2),I=T[0],P=T[1],R=Object(a.useState)(!1),D=Object(b.a)(R,2),B=D[0],L=D[1],z=Object(a.useState)(""),K=Object(b.a)(z,2),G=K[0],V=K[1],Q=function(){return L(!B)},J=function(e){s("ethereum"===e?"ethereum":e)},q=function(){P(!1),g(""),V(""),S("")},X=function(e,t){F.a.fire({title:"Success",html:"You sent <b>".concat(e,"</b> ").concat(G," to <b>").concat(t,"</b>."),icon:"success",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Okay"}).then((function(e){e.value&&i.push("/assets")}))},Z=function(e,t){q(),F.a.fire({title:"Success",html:"You sent <b>".concat(e.sendAmount,"</b> ethers to <b>").concat(e.sendToAddress,"</b>.<br>\n      Your confirmation code is <b>").concat(t.hash,"</b>.<br>So far your account has completed ").concat(t.nonce+1," transactions."),icon:"success",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Okay"}).then((function(e){e.value&&i.push("/assets")}))},$=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.fire({title:"Are you sure?",html:"You are sending <b>".concat(t.sendAmount," ").concat(G,"</b> to <b>").concat(t.sendToAddress,"</b>.<br><small>Please double check the address and the amount.</small>"),showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No"});case 2:e.sent.value&&ee(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,U.a.utils.isAddress(t.sendToAddress)){e.next=3;break}throw Error("Destination address is invalid");case 3:P(!0),setTimeout(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"default"!==h.address){e.next=6;break}return e.next=4,ae(t);case 4:e.next=8;break;case 6:return e.next=8,te();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),F.a.fire("ERROR",e.t0.error.message,"error");case 13:return e.prev=13,q(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),250),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),F.a.fire("ERROR",e.t0.message,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(ne.default)({wallet:r,address:h.address,type:h.type}).get(),e.next=4,t.transfer(N,v);case 4:X(v,N),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),F.a.fire("ERROR",e.t0.message,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.sendTransaction({to:t.sendToAddress,value:U.a.utils.parseEther(t.sendAmount.toString())});case 3:n=e.sent,Z(t,n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),F.a.fire("ERROR",e.t0.message,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j&&S(j),e.next=3,k.getAsset(o);case 3:(t=e.sent)?f(t):F.a.fire("ERROR","Asset not found.","error").then((function(e){i.push("/assets")}));case 5:case"end":return e.stop()}}),e)})))()}),[j,i,o]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(W,{title:"Scan a QR Code",showModal:B,ohHide:Q,children:Object(A.jsx)("div",{style:fe,children:Object(A.jsx)(Y.a,{delay:me,style:he,onError:function(e){alert("Oops, scanning failed. Please try again")},onScan:function(e){if(e)try{if("0x"===e.substring(0,2))return n({address:e}),Q(),void i.push("/select-token");var t=e.split(","),a={};t.forEach((function(e){var t=e.split(":");a[t[0]]=t[1].trim()}));var s=Object.getOwnPropertyNames(a)[0];a.address=a[s],J(s),n(a),Q(),i.push("/transfer")}catch(c){Q(),F.a.fire("ERROR","Invalid wallet address!","error")}}})})}),Object(A.jsx)(H,{showModal:I,message:"Transferring tokens. Please wait..."}),Object(A.jsx)(M,{currentMenu:"Transfer"}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsx)("div",{id:"cmpMain",children:Object(A.jsxs)("div",{className:"section mt-2 mb-5",children:[Object(A.jsx)("div",{className:"wide-block pt-2 pb-2",children:Object(A.jsxs)("div",{className:"alert alert-primary mb-1",role:"alert",style:{fontSize:"1rem"},children:["Token Name : ",Object(A.jsx)("strong",{children:h&&h.name})," ",Object(A.jsx)("br",{}),"Current Balance : ",Object(A.jsx)("strong",{children:h&&h.balance})," ",Object(A.jsx)("br",{}),"Current Network : ",Object(A.jsx)("strong",{children:c&&c.display})]})}),Object(A.jsxs)("div",{className:"card mt-5",id:"cmpTransfer",children:[Object(A.jsx)("div",{className:"card-body",children:Object(A.jsxs)("form",{children:[Object(A.jsx)("div",{className:"form-group boxed",style:{padding:0},children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",htmlFor:"sendToAddr",children:"Destination Address:"}),Object(A.jsxs)("div",{className:"input-group mb-3",children:[Object(A.jsx)("input",{type:"text",className:"form-control",id:"sendToAddr",name:"sendToAddr",placeholder:"Enter receiver's address",onChange:function(e){S(e.target.value)},value:N}),Object(A.jsx)("i",{className:"clear-input",children:Object(A.jsx)(_.IoCloseCircle,{className:"ion-icon"})}),Object(A.jsx)("div",{className:"ml-1",children:Object(A.jsx)("button",{type:"button",className:"btn btn-icon btn-primary mr-1 mb-1 btn-scan-address",onClick:Q,children:Object(A.jsx)(_.IoQrCodeOutline,{className:"ion-icon"})})})]})]})}),Object(A.jsx)("div",{className:"form-group boxed",style:{padding:0},children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",htmlFor:"sendAmount",children:"Amount to Send:"}),Object(A.jsx)("input",{onChange:function(e){g(e.target.value)},value:v,type:"number",className:"form-control",id:"sendAmount",name:"sendAmount",placeholder:"Enter amount to send"}),Object(A.jsx)("i",{className:"clear-input",children:Object(A.jsx)(_.IoCloseCircle,{className:"ion-icon"})})]})}),Object(A.jsx)("div",{className:"mt-3",children:Object(A.jsx)("small",{children:"Important: Please double check the address and amount before sending. Transactions cannot be reversed."})})]})}),Object(A.jsx)("div",{className:"card-footer text-right",children:Object(A.jsxs)("button",{type:"button",id:"btnSend",className:"btn btn-success",onClick:function(){return navigator.onLine?v&&N?void $({sendAmount:v,sendToAddress:N}):F.a.fire({title:"ERROR",icon:"error",text:"Send amount and receiver address is required"}):F.a.fire({title:"OFFLINE",icon:"error",text:"Cannot transfer while you are offline. Please connect to the Internet and try again."})},children:[Object(A.jsx)(_.IoSendOutline,{className:"ion-icon"})," Send Now"]})})]})]})})})]})}var Oe=n(125);function ve(e){var t=e.wallet,n=e.network,a=null!=n?new U.a.providers.JsonRpcProvider(n.url):null;return{getBalance:function(e){return Object(d.a)(u.a.mark((function n(){var s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=e||t.address,n.next=3,a.getBalance(e);case 3:return s=n.sent,n.abrupt("return",U.a.utils.formatEther(s));case 5:case"end":return n.stop()}}),n)})))()}}}function ge(){var e=Object(l.g)(),t=Object(a.useContext)(C),n=t.address,s=t.network,c=t.wallet,r=Object(a.useState)([]),i=Object(b.a)(r,2),o=i[0],j=i[1],p=Object(a.useState)(0),m=Object(b.a)(p,2),h=m[0],f=m[1];Object(a.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.listAssets(s.name);case 2:t=e.sent,n=t.find((function(e){return"default"===e.address})),(t=t.filter((function(e){return"default"!==e.address}))).unshift(n),j(t);case 7:case"end":return e.stop()}}),e)})))()}),[s.name]);var x=Object(a.useCallback)(Object(d.a)(u.a.mark((function e(){var t,a,r,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.onLine){e.next=2;break}return e.abrupt("return");case 2:t=Object(Oe.a)(o),e.prev=3,t.s();case 5:if((a=t.n()).done){e.next=22;break}if("default"!==(r=a.value).address){e.next=13;break}return e.next=10,ve({network:s}).getBalance(n);case 10:r.balance=e.sent,e.next=18;break;case 13:return i=Object(ne.default)({wallet:c,address:r.address,type:r.type}).get(),e.next=16,i.balanceOf(n);case 16:l=e.sent,r.balance=l.toNumber();case 18:f(r.balance),k.saveAsset(r);case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),t.e(e.t0);case 27:return e.prev=27,t.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[3,24,27,30]])}))),[n,s,o,c]);Object(a.useEffect)((function(){x();var e=setInterval((function(){x()}),1e4);return function(){return clearInterval(e)}}),[x]);return Object(A.jsxs)("div",{id:"appCapsule",children:[Object(A.jsx)(M,{handleIconClick:function(t){t.preventDefault(),e.push("/import-token")},ionIcon:"IoBriefcaseOutline",currentMenu:"Assets"}),Object(A.jsx)("div",{className:"card-body",children:Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:"listview-title mt-2",children:"Your Token Assets"}),Object(A.jsx)("ul",{className:"listview image-listview",children:o&&o.length>0?o.map((function(t){return Object(A.jsx)("li",{children:Object(A.jsx)("a",{href:"#view",className:"item",onClick:function(n){return function(t,n){t.preventDefault(),e.push("/assets/"+n)}(n,t.address)},children:Object(A.jsxs)("div",{className:"item",children:[Object(A.jsx)("img",{src:ie,alt:"Token",className:"image"}),Object(A.jsxs)("div",{className:"in",children:[Object(A.jsxs)("div",{children:[t.name||"N/A",Object(A.jsx)("footer",{children:t.symbol})]}),Object(A.jsx)("span",{className:"badge badge-primary",children:t.balance?Number(t.balance).toFixed(2):0})]})]})})},t.symbol)})):Object(A.jsx)("div",{style:{padding:20},children:Object(A.jsx)("span",{children:Object(A.jsx)("small",{test:h,children:"Your assets will appear here..."})})})})]})})]})}function we(e){var t=Object(l.g)(),n=Object(a.useContext)(C).network,s=e.match.params.address,c=Object(a.useState)(null),r=Object(b.a)(c,2),i=r[0],o=r[1];Object(a.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAsset(s);case 2:(t=e.sent)&&o(t);case 4:case"end":return e.stop()}}),e)})))()}),[s]);var j=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t.push("/transfer/"+s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(M,{currentMenu:"Token Details"}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsx)("div",{className:"section mt-2",children:Object(A.jsx)("div",{className:"card cart-item mb-2",children:Object(A.jsxs)("div",{className:"card-body",children:[Object(A.jsxs)("div",{className:"in",children:[Object(A.jsx)("img",{src:ie,alt:"product",className:"imaged"}),Object(A.jsxs)("div",{className:"text",children:[Object(A.jsx)("h3",{className:"title",children:i?i.name:"N/A"}),Object(A.jsx)("p",{className:"detail",children:i&&i.symbol}),Object(A.jsxs)("strong",{className:"price",children:[" ",i&&i.balance]})]})]}),Object(A.jsxs)("div",{className:"cart-item-footer",children:[Object(A.jsx)("div",{className:"stepper  stepper-secondary",children:Object(A.jsx)("span",{style:{fontSize:"0.8rem"},children:n&&n.display})}),Object(A.jsxs)("a",{href:"#send",onClick:function(e){return j(e)},className:"btn btn-primary btn-sm",children:[Object(A.jsx)(_.IoSendOutline,{className:"ion-icon"}),"Send"]})]})]})})})})]})}var ye=n(61),Ne=n(929),ke=n(234),Ae=n.n(ke),Se=n(244),Ce=n.n(Se),Ee=n(84);function Te(e){var t=e.icon,n=e.btnText,a=e.imageUrl,s=e.handleClick;return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:"col-sm-3",style:{marginTop:15},children:[Object(A.jsx)("img",{className:"card-img-top",height:"194",src:a,alt:"My doc"}),Object(A.jsx)("div",{className:"card text-center",children:Object(A.jsx)("div",{className:"card-body",children:Object(A.jsxs)("button",{onClick:s,type:"button",className:"btn btn-success btn-md",id:"btnMnemonic",children:[t," ",n]})})})]})})}function Ie(e){var t=e.showModal,n=e.handleDownloadClick,a=e.handleRemoveDocClick,s=e.children,c=e.ohHide,r=e.documentName;return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(D.a,{className:"modal fade stories",id:"StoryDefault",tabIndex:-1,role:"dialog",show:t,onHide:c,size:"lg",children:[Object(A.jsx)(D.a.Body,{style:{padding:0},children:s}),Object(A.jsxs)(D.a.Footer,{style:{padding:0,justifyContent:"space-between"},children:[Object(A.jsx)("div",{style:{float:"left"},children:r}),Object(A.jsxs)("div",{children:[Object(A.jsx)(B.a,{onClick:a,className:"btn-sm",variant:"danger",children:"Remove"}),"\xa0",Object(A.jsx)(B.a,{className:"btn-sm",type:"button",onClick:function(e){return n(e)},variant:"primary",children:"Download"})]})]})]})})}function Pe(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"my_doc",n=e.split(","),a=n[0].match(/:(.*?);/)[1],s=atob(n[1]),c=s.length,r=new Uint8Array(c);c--;)r[c]=s.charCodeAt(c);return new File([r],t,{type:a})}function Re(e){return new Promise((function(t,n){fetch(e).then((function(e){var n=e.blob();t(n)})).catch((function(e){return n(e)}))}))}var Fe=function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},_e=n.p+"static/media/camera-doc-overlay.165d5275.svg";function Me(e){var t=e.handleCapture,n=e.modalSize,s=e.showModal,c=e.ohHide,r=e.closeModal,i=e.webcamRef,l=Object(a.useState)(!1),o=Object(b.a)(l,2),u=(o[0],o[1],Object(a.useState)("")),d=Object(b.a)(u,2),j=(d[0],d[1],Object(a.useState)(!1)),p=Object(b.a)(j,2),m=(p[0],p[1],Object(a.useState)({width:window.innerHeight,height:window.innerWidth,facingMode:"environment"})),h=Object(b.a)(m,2),f=h[0],x=(h[1],Object(a.useState)(!1)),O=Object(b.a)(x,2),v=(O[0],O[1],Object(a.useState)("")),g=Object(b.a)(v,2),w=(g[0],g[1],Object(a.useState)("")),y=Object(b.a)(w,2),N=(y[0],y[1],Object(a.useState)([])),k=Object(b.a)(N,2);k[0],k[1];return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(D.a,{size:n||"md",show:s||!1,onHide:c,className:"fullscreen-modal",style:{width:window.innerWidth,height:window.innerHeight},children:[Object(A.jsx)(D.a.Body,{children:Object(A.jsx)(Ae.a,{audio:!1,ref:i,screenshotFormat:"image/jpeg",videoConstraints:f,style:{}})}),Object(A.jsx)("img",{src:_e,alt:"camera overlay",className:"camera-document-overlay",style:{width:window.innerWidth,height:window.innerHeight}}),Object(A.jsxs)("button",{type:"button",className:"btn btn-danger rounded me-1 camera-capture-button",onClick:t,style:{top:(window.innerHeight-50)/2,left:30,border:"3px white solid",height:50,opacity:.8},children:["\xa0 \xa0",Object(A.jsx)(_.IoCameraOutline,{className:"ion-icon"})]}),Object(A.jsx)("button",{type:"button",className:"btn btn-icon btn-dark rounded me-1 mb-1 camera-close-button",onClick:r,style:{left:window.innerWidth-60,top:window.innerHeight-70},children:Object(A.jsx)(_.IoCloseCircleOutline,{className:"ion-icon"})})]})})}var De="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAh1BMVEX///8ANkkAK0EAM0ZqgosALUKerLIAO01CY3Gvur89XmwANUlKaXW0v8S3wMTe5ecAHzintLlWb3p3ipKNnaQAJDvCyMtLZHDI0dU9X2zZ3+EAITq7xspie4WDmKBrhY8AFTIAACkmTl01WGYQQVJ8j5jk6uvw8/QADC0AFDLFz9MAABwAACAUn2nwAAADq0lEQVR4nO3d61biMBSGYdK0RBmBoqBQEPGsOPd/fYPoGlJmmh52ErLj9/zFRl8p7aKn9HoAAAAAAAAAAAAAAAAAANDF/DZ1bX3awtFSOpYtTlyYKJU5JJU4O3nhw6TvTipPXygGLscfJgEUOv2cnKPQORRSodA9FFKh0L34C1eO/wIvhXcXBo9CPZle/7ZYdfzlXgoX8lc1oZQyvPz3x5YdE70UngklE5Js92/omOipUD6PhhR92TnRU2EypI3wMlNdE30VntNGGM/Uk+yWyKdQFZlQeftEPoWyVySiw7vIqfArcdRyUVaFX4nDca3i9bAor8J9YjKr9TY5LMqscJ9YL2Nc+J2Y5Eb3nAt7xW7HIbfNF+VXuE9ssdNgWLhfUZvv+jkWttv1syxslcizsM2KyrSwxbvItXCX2HCLyrawcSLfwqb7RcaFDRM5F+5X1NotKuvCRp9F3oVNEpkXNlhRuRf2ClHzLvIpFKvr/5lPa46j8ilUFac0Po/3q3xeuSiXwlwY7OqrjzEyKXx5vKl28aTkdLvSvRwWZVJotjg+e7fpH16MonAgVHm1nfE71mY2EKK8Fg+0k3mRFCbVu4tYCtlvS81QiEI6FFKhEIV0KKQKrbCY2KB9ewiucLKxccPWvTZ+cIUz0/f1pt618UMrXN1cWqD/1aEV2odCFNLhOz7VQIjbqW6tHSCOpFCJ0t3beXzH2o4Kl/EVissrXapd2RdJYfxbmh+wt0ChYyikQiEK6VBIhULfhdv0yoJUGz+0womVR1+9aeMHV5jbOF4acuF8PbVAfwZbaIX2oRCFdPiOT/V51ddF5Fd9xX/lnpKlnWWEV1/K5/PSGeLi8GIkhT9gW4pCx1BIhUIU0qGQCoUopCsXDh8HFjxo44dWaOfKvY02fnCFG9pTIr+EfPXleLSyQH8QY2iF9qEQhXQeCq8rX4ykkP8z98z+KUwiLJSlJ0O+R3g0cTrXbWO7H/9HbEtR6BgKqVCIQjoUUqEQhXRHR6LuzQ/jbuZDGz+4wqzBU9Vr5dr4wRW+1T8Yv95vbfzQCl/r5zZoQhs/tEL7UIhCOhRSGQu9zJbr47q2qjnBRs8+Zjz2cTSx8jScl1mrfVxfaph2T7qfedzLNcIGdy5/+d5Jz8x4cdJtqRcopEKheyikQqF7KKQKopA4W67ZIoBCmfbdmTyYZg7wVHh055VlxrkRvFhkNu5PN1k6/RTUW6eu3VbP4AEAAAAAAAAAAAAAAAAAACZ/AO9yoVMD1JMxAAAAAElFTkSuQmCC",Be=n(662);function We(){var e=Object(a.useContext)(C).wallet,t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)(""),o=Object(b.a)(l,2),j=o[0],p=o[1],m=Object(a.useState)(!1),h=Object(b.a)(m,2),f=h[0],x=h[1],O=Object(a.useState)(""),v=Object(b.a)(O,2),g=v[0],w=v[1],y=Object(a.useState)(""),N=Object(b.a)(y,2),S=N[0],E=N[1],T=Object(a.useState)({width:1080,height:500,facingMode:"environment"}),I=Object(b.a)(T,2),P=(I[0],I[1],Object(a.useState)(!1)),R=Object(b.a)(P,2),D=R[0],B=R[1],U=Object(a.useState)(""),L=Object(b.a)(U,2),H=L[0],z=L[1],K=Object(a.useState)(""),G=Object(b.a)(K,2),V=(G[0],G[1]),Q=Object(a.useState)([]),Y=Object(b.a)(Q,2),J=Y[0],q=Y[1],X=Ee.a.publicKeyByPrivateKey(e.privateKey),Z=function(e,t,n){e&&e.preventDefault(),E(n),w(t),x(!f)},$=function(){r(!c)},ee=function(){z(""),B(!D)},te=s.a.useRef(null),ne=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.a.encryptWithPublicKey(X,t);case 2:return n=e.sent,a=Ee.a.cipher.stringify(n),e.next=6,Ce.a.of(a);case 6:return s=e.sent,e.abrupt("return",{encryptedFile:n,encryptedFileString:a,hash:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,s,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(j),n=Pe(j,H),e.next=5,ne(j);case 5:return a=e.sent,s=a.hash,c=a.encryptedFileString,r={hash:s,type:"general",name:H,file:n,encryptedFile:c,createdAt:Date.now(),inIpfs:!1},e.next=11,k.saveDocuments(r);case 11:r.file=j,q([].concat(Object(ye.a)(J),[r])),ee(),p(""),z("");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var se=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.blob());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a,s,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getIpfs();case 2:return t=e.sent,n=t.ipfsUrl,e.next=6,k.listDocuments();case 6:a=e.sent,s=Be(n),c=Object(Oe.a)(a);try{for(i=function(){var e=r.value;!0!==e.inIpfs&&s.add(e.encryptedFile).then((function(t){e.inIpfs=!0,k.updateDocument(e.hash,e)}))},c.s();!(r=c.n()).done;)i()}catch(l){c.e(l)}finally{c.f()}case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var t=Object(d.a)(u.a.mark((function t(){var n,a,s,c,r,i,l,o,d,b,j;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getIpfs();case 2:return n=t.sent,a=n.ipfsDownloadUrl,t.next=6,k.listDocuments();case 6:s=t.sent,c=Object(Oe.a)(s),t.prev=8,c.s();case 10:if((r=c.n()).done){t.next=39;break}if((i=r.value).file){t.next=32;break}return t.next=15,se(a+"/"+i.hash);case 15:return l=t.sent,t.next=18,l.text();case 18:return o=t.sent,d=Ee.a.cipher.parse(o),t.next=22,Ee.a.decryptWithPrivateKey(e.privateKey,d);case 22:return b=t.sent,j=Pe(b,i.name),t.next=26,k.updateDocument(i.hash,{file:j,encryptedFile:o});case 26:return console.info("Downloaded file: "+i.hash),t.next=29,Fe(j);case 29:i.file=t.sent,t.next=36;break;case 32:if(!i.file){t.next=36;break}return t.next=35,Fe(i.file);case 35:i.file=t.sent;case 36:i.name=i.encryptedFile?i.encryptedFile.length/1e3:i.name;case 37:t.next=10;break;case 39:t.next=44;break;case 41:t.prev=41,t.t0=t.catch(8),c.e(t.t0);case 44:return t.prev=44,c.f(),t.finish(44);case 47:q(s);case 48:case"end":return t.stop()}}),t,null,[[8,41,44,47]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var t,n,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.listDocuments();case 2:return t=e.sent,e.next=5,k.getIpfs();case 5:n=e.sent,n.ipfsDownloadUrl,a=Object(Oe.a)(t),e.prev=8,a.s();case 10:if((s=a.n()).done){e.next=21;break}if(!(c=s.value).file){e.next=18;break}return e.next=15,Fe(c.file);case 15:c.file=e.sent,e.next=19;break;case 18:c.file="https://i.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.webp";case 19:e.next=10;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(8),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:q(t),re(),ce();case 32:case"end":return e.stop()}}),e,null,[[8,23,26,29]])})))()}),[]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(M,{ionIcon:"IoDocumentLockOutline",currentMenu:"Secure Document Vault",actionButton:Object(A.jsx)(i.b,{className:"headerButton",to:"#",onClick:$,children:Object(A.jsx)(_.IoAddCircleOutline,{className:"ion-icon"})})}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsx)("div",{class:"section mt-2",children:J.length>0&&J.map((function(e){return Object(A.jsx)("div",{class:"card-block bg-secondary mb-2",children:Object(A.jsxs)("div",{class:"card-main",children:[Object(A.jsx)("div",{class:"card-button dropdown",children:Object(A.jsxs)(Ne.a,{children:[Object(A.jsx)(Ne.a.Toggle,{variant:"link",bsPrefix:"p-0",children:Object(A.jsx)(_.IoEllipsisHorizontal,{className:"ion-icon"})}),Object(A.jsxs)(Ne.a.Menu,{children:[Object(A.jsxs)(Ne.a.Item,{href:"#/action-1",children:[Object(A.jsx)(_.IoPencilOutline,{className:"ion-icon"}),"Edit"]}),Object(A.jsxs)(Ne.a.Item,{href:"#/action-2",children:[Object(A.jsx)(_.IoCloseOutline,{className:"ion-icon"}),"Remove"]})]})]})}),Object(A.jsx)("div",{class:"balance",children:Object(A.jsx)("h1",{class:"title",children:"Citizenship Card"})}),Object(A.jsxs)("div",{class:"in",children:[Object(A.jsxs)("div",{class:"card-number",children:[Object(A.jsx)("span",{class:"label",children:"Number"}),"\u2022\u2022\u2022\u2022 9905"]}),Object(A.jsx)("div",{class:"bottom",children:Object(A.jsxs)("div",{class:"card-expiry",children:[Object(A.jsx)("span",{class:"label",children:"Expiry Date"}),"Never"]})})]})]})},e.hash)}))})}),Object(A.jsx)(Ie,{handleRemoveDocClick:function(){console.log("Not Implemented: remove from ipfs and indexedDB")},handleDownloadClick:function(e){return e.preventDefault(),function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="blob",t.onload=function(){var e=(window.URL||window.webkitURL).createObjectURL(this.response),t=document.createElement("a");t.href=e,t.download=S,document.body.appendChild(t),t.click(),document.body.removeChild(t)},t.send()}(g)},showModal:f,ohHide:Z,documentName:S,children:Object(A.jsx)("div",{role:"document",children:Object(A.jsx)("div",{className:"modal-content",children:Object(A.jsx)("div",{className:"story-image",children:Object(A.jsx)("img",{width:"100%",src:g,alt:"My document"})})})})}),Object(A.jsxs)(W,{modalSize:"lg",title:"",showModal:D,ohHide:ee,children:[Object(A.jsx)("img",{style:{minHeight:350,maxHeight:450},className:"card-img-top",src:j||De,alt:"My doc"}),Object(A.jsx)("div",{className:"section mt-4 mb-5",children:Object(A.jsxs)("form",{onSubmit:function(e){return ae(e)},children:[Object(A.jsx)("div",{className:"form-group basic",children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("label",{className:"label",htmlFor:"documentName",children:"Document Name"}),Object(A.jsx)("input",{type:"text",className:"form-control",name:"documentName",id:"documentName",onChange:function(e){z(e.target.value)},value:H,placeholder:"Enter short document name",required:!0}),Object(A.jsx)("i",{className:"clear-input",children:Object(A.jsx)(_.IoCloseCircle,{className:"ion-icon"})})]})}),Object(A.jsx)("div",{className:"form-links mt-2",children:Object(A.jsx)("div",{children:Object(A.jsx)("a",{href:"#capture",onClick:function(e){return function(e){e.preventDefault(),ee(),$()}(e)},children:"Capture another?"})})}),Object(A.jsx)("div",{className:"mt-2",children:Object(A.jsx)("button",{type:"submit",className:"btn btn-primary btn-block btn-lg",children:"Save"})})]})})]}),Object(A.jsx)(Me,{modalSize:"lg",title:"",showModal:c,closeModal:function(){r(!1)},ohHide:$,handleCapture:function(){var e=te.current.getScreenshot();Re(e).then((function(t){V(t),p(e),$(),ee()})).catch((function(e){F.a.fire("ERROR","Image capture failed","error")}))},webcamRef:te}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsx)("div",{className:"container",children:Object(A.jsx)("div",{className:"section full mt-2",children:Object(A.jsx)("form",{children:Object(A.jsx)("div",{className:"content-header mb-05",children:Object(A.jsxs)("div",{className:"row",style:{marginBottom:30},children:[J.length>0&&J.map((function(e){return Object(A.jsx)("div",{className:"col-sm-3",style:{marginTop:15},children:Object(A.jsx)("div",{className:"card",onClick:function(t){return Z(t,e.file,e.name)},children:Object(A.jsx)("img",{style:{borderRadius:"6px"},className:"card-img-top",src:e.file,alt:"My doc",height:"282"})})},e.hash)})),Object(A.jsx)(Te,{btnText:"Take a picture to upload",imageUrl:De,icon:Object(A.jsx)(_.IoAddCircleOutline,{className:"ion-icon"}),handleClick:$})]})})})})})})]})}var Ue=n(52),Le=n.p+"static/media/user.4a000e6c.svg",He=n(3),ze=n(4),Ke="https://www.googleapis.com/upload/drive/v3/files",Ge="id,version,name,appProperties",Ve=function(){function e(t){Object(He.a)(this,e),this.gapi=t}return Object(ze.a)(e,[{key:"listFiles",value:function(e){var t=this;var n="trashed=false";return e&&(n="'".concat(e,"' in parents and trashed=false")),new Promise((function(e,a){t.gapi.client.drive.files.list({pageSize:300,fields:"files(".concat(Ge,")"),q:n}).execute((function(t){return e(function(e){for(var t=[],n=0;n<e.files.length;n++){var a=e.files[n];t.push(a)}return t}(t))}))}))}},{key:"createFile",value:function(e){var t=this,n=e.name,a=e.data,s=e.parentId,c=e.ifid,r="-batch-31415926579323846boundatydnfj111",i="\r\n--".concat(r,"\r\n"),l="\r\n--".concat(r,"--"),o={mimeType:"Content-Type: text/xml",name:n,appProperties:{ifid:c}};s&&(o.parents=[s]);var u="".concat(i,"Content-Type: application/json\r\n\r\n").concat(JSON.stringify(o)).concat(i,"Content-Type: text/xml\r\n\r\n").concat(a).concat(l);return new Promise((function(e,n){t.gapi.client.request({path:Ke,method:"POST",params:{uploadType:"multipart",fields:Ge},headers:{"Content-Type":'multipart/related; boundary="'.concat(r,'"')},body:u}).then((function(t){return e(t.result)}),(function(t){return e({})}))}))}},{key:"getFileDescription",value:function(e){var t=this;return new Promise((function(n,a){t.gapi.client.drive.files.get({fileId:e,fields:Ge}).execute((function(e){return n(e)}))}))}},{key:"downloadFile",value:function(e){var t=this;return new Promise((function(n,a){t.gapi.client.drive.files.get({fileId:e,alt:"media"}).then((function(e){return n(e.body)}),a)}))}},{key:"renameFile",value:function(e,t){var n=this;return new Promise((function(a,s){n.gapi.client.drive.files.update({fileId:e,name:t,fields:Ge}).then((function(e){return a(e.result)}),s)}))}},{key:"deleteFile",value:function(e){var t=this;return new Promise((function(n,a){t.gapi.client.drive.files.delete({fileId:e}).then(n,a)}))}},{key:"updateFile",value:function(e,t){var n=this;return new Promise((function(a,s){n.gapi.client.request({path:"".concat(Ke,"/").concat(e),method:"PATCH",params:{uploadType:"media",fields:Ge},body:t}).then((function(e){return a(e.result)}),s)}))}},{key:"getByName",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="name='".concat(t,"' and trashed = false"),n&&(a="name='".concat(t,"' and trashed = false and '").concat(n,"' in parents")),e.abrupt("return",new Promise((function(e,t){s.gapi.client.drive.files.list({pageSize:1,q:a}).then((function(t){e({files:t.result.files,incompleteSearch:t.result.incompleteSearch,firstFile:t.result.files.length>0?t.result.files[0]:null,exists:t.result.files.length>0})}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Qe=function(){function e(t){Object(He.a)(this,e),this.gapi=t}return Object(ze.a)(e,[{key:"create",value:function(e,t){var n=this,a={name:e,mimeType:"application/vnd.google-apps.folder",appProperties:{ifid:(t=t||{}).ifid}};return new Promise((function(e,t){n.gapi.client.drive.files.create({resource:a,fields:"id,version,name,appProperties"}).then((function(t){return e(t.result)}),t)}))}},{key:"getByName",value:function(e){var t=this;return new Promise((function(n,a){t.gapi.client.drive.files.list({pageSize:1,q:"name='".concat(e,"' and trashed = false and mimeType = 'application/vnd.google-apps.folder'")}).then((function(e){return n({files:e.result.files,incompleteSearch:e.result.incompleteSearch,firstFile:e.result.files.length>0?e.result.files[0]:null,exists:e.result.files.length>0})}))}))}},{key:"ensureExists",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getByName(t);case 2:if(a=e.sent,!(s=a.firstFile)){e.next=6;break}return e.abrupt("return",{id:s.id,name:s.name});case 6:return e.abrupt("return",this.create(t,n));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ye=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];function Je(){var e=Object(l.g)(),t=[{hash:"#choose-account",label:"Please choose Google account. Please click the switch account button to change account."},{hash:"#process",label:"Your is being backed up in Google Drive."},{hash:"#enter-passphrase",label:"Please enter backup passphrase. It must be at least 10 characters long with one number and alphabet. Button will appear after you type 12 characters. <br />PLEASE NOTE: THIS IS DIFFERENT THAN YOUR 6-DIGIT PASSCODE."}],n=Object(a.useContext)(C).wallet,s=Object(a.useRef)(null),c=Object(a.useState)(null),r=Object(b.a)(c,2),o=r[0],p=r[1],m=Object(a.useState)({id:null,name:"Loading User...",email:null,image:Le}),h=Object(b.a)(m,2),f=h[0],O=h[1],v=Object(a.useState)(""),g=Object(b.a)(v,2),w=g[0],y=g[1],N=Object(a.useState)("None"),S=Object(b.a)(N,2),E=S[0],T=S[1],I=Object(a.useState)({message:"Processing...",percent:0,showHome:!1}),P=Object(b.a)(I,2),R=P[0],M=P[1],D=Object(a.useState)({}),B=Object(b.a)(D,2),W=B[0],U=B[1],L=function(e){p(null);var n=t.find((function(t){return t.hash===e}));U(n||t.find((function(e){return"#choose-account"===e.hash})))},H=function(){Ue.a.client.init({clientId:"1037282848942-iorpo75krbdj1p40rqncs1i8504lgger.apps.googleusercontent.com",discoveryDocs:Ye,ux_mode:"redirect",scope:"profile email https://www.googleapis.com/auth/drive",redirect_uri:"".concat("https://wallet.dev.rumsan.net/google","/backup")}).then((function(){Ue.a.auth2.getAuthInstance().isSignedIn.listen(z),z(Ue.a.auth2.getAuthInstance().isSignedIn.get())}))},z=function(e){if(e){var t=Ue.a.auth2.getAuthInstance().currentUser.get().getBasicProfile();O({id:t.getId(),name:t.getName(),email:t.getEmail(),image:t.getImageUrl()})}else K()},K=function(){return Ue.a.auth2.getAuthInstance().signIn()},G=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:"rumsan-wallet",type:"ethersjs"},e.next=3,k.list();case 3:return e.sent.forEach((function(e){a[e.name]=e.data})),e.next=7,n.encrypt(t.toString());case 7:return a.wallet=e.sent,delete a.backup_googleFile,delete a.backup_wallet,e.next=12,k.listDocuments();case 12:return a.documents=e.sent,a.documents.forEach((function(e){delete e.file,delete e.encryptedFile})),e.next=16,k.listAssets();case 16:return a.assets=e.sent,e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var t=Object(d.a)(u.a.mark((function t(){var a,c,r,i,l,o,d,b;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(null),t.prev=1,e.push("#process"),a=new Qe(Ue.a),c=new Ve(Ue.a),M(Object(j.a)(Object(j.a)({},R),{},{percent:5,message:"Preparing data to backup..."})),t.next=8,G(w);case 8:return r=t.sent,t.next=11,Ee.a.encryptWithPublicKey(Ee.a.publicKeyByPrivateKey(n.privateKey),w);case 11:return i=t.sent,l=Ee.a.cipher.stringify(i),t.next=15,k.save("backup_passphrase",l);case 15:return M(Object(j.a)(Object(j.a)({},R),{},{percent:30,message:"Checking if previous backup exists..."})),t.next=18,a.ensureExists(x.BACKUP.GDRIVE_FOLDERNAME);case 18:return o=t.sent,M(Object(j.a)(Object(j.a)({},R),{},{percent:50,message:"Backing up encrypted wallet to Google Drive..."})),t.next=22,c.getByName(n.address,o.id);case 22:return d=t.sent,M(Object(j.a)(Object(j.a)({},R),{},{percent:70,message:"Creating the encrypted backup file..."})),t.next=26,c.createFile({name:n.address,data:JSON.stringify(r),parentId:o.id});case 26:return b=t.sent,t.next=29,k.save("backup_googleFile",b.id);case 29:return t.next=31,k.save("backup_wallet",r.wallet);case 31:if(M(Object(j.a)(Object(j.a)({},R),{},{percent:80,message:"Cleaning up and finalizing..."})),!d.exists){t.next=35;break}return t.next=35,c.deleteFile(d.firstFile.id);case 35:M(Object(j.a)(Object(j.a)({},R),{},{percent:100,showHome:!0,message:"Wallet backed up successfully. Backup file named "+n.address+" has been created."})),t.next=44;break;case 38:t.prev=38,t.t0=t.catch(1),console.log(t.t0.message),y(""),s.current.focus(),p("Backup passphrase is incorrect. Please try again.");case 44:case"end":return t.stop()}}),t,null,[[1,38]])})));return function(){return t.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(new RegExp("^(?=.*[a-zA-Z])(?=.*[0-9])(?=.{10,})").test(w)){e.next=4;break}return F.a.fire("Passphrase incorrect","Passphrase must be 10 characters and have at least one number.","error"),e.abrupt("return");case 4:return e.next=6,F.a.fire({title:"Important",icon:"warning",html:"You MUST write this passphrase and store it safely. It is used to encrypt your wallet. If you forget it there is no way to retrieve your wallet. It will be gone forever. <br /> Your passphrase is: ".concat(w),showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, I have written it down",cancelButtonText:"No, I want choose another"});case 6:e.sent.value&&V();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){e.listen((function(e){L(e.hash)})),L(e.location.hash),Ue.a.load("client:auth2",H)}),[]),Object(A.jsxs)("div",{id:"appCapsule",children:[Object(A.jsxs)("div",{className:"appHeader bg-success text-light",children:[Object(A.jsx)("div",{className:"left",children:""!==e.location.hash&&Object(A.jsx)("button",{href:"#",className:"headerButton btn",onClick:function(t){return function(t){if("POP"===e.action)return e.push("/google/backup");e.goBack()}()},children:Object(A.jsx)(_.IoChevronBackOutline,{className:"ion-icon"})})}),Object(A.jsx)("div",{className:"pageTitle",children:"Backup to Google Drive"}),Object(A.jsx)("div",{className:"right",children:Object(A.jsx)(i.b,{to:"/",className:"headerButton",children:Object(A.jsx)(_.IoHomeOutline,{className:"ion-icon"})})})]}),Object(A.jsxs)("div",{style:{marginTop:80},children:[Object(A.jsxs)("div",{className:"section",children:[Object(A.jsx)("h2",{children:"Backup Wallet to your Google Drive"}),Object(A.jsx)("h4",{dangerouslySetInnerHTML:{__html:W.label}})]}),"#choose-account"===W.hash&&Object(A.jsxs)("div",{className:"text-center section full mt-2 mb-3",children:[Object(A.jsxs)("div",{className:"text-center wide-block p-3",children:[Object(A.jsx)("div",{className:"avatar",children:Object(A.jsx)("img",{src:f.image,alt:"avatar",className:"imaged w64 rounded"})}),Object(A.jsxs)("div",{className:"in mt-1",children:[Object(A.jsx)("h3",{className:"name",children:f.name}),Object(A.jsx)("h5",{className:"subtext",style:{margin:-3},children:f.email})]}),f.id&&Object(A.jsx)("button",{className:"btn btn-sm btn-outline-secondary mt-2",id:"btnMnemonic",onClick:function(e){return K()},children:"Switch account"})]}),f.id&&Object(A.jsx)("div",{className:"text-center mt-3",children:Object(A.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.push("#enter-passphrase")},children:"Continue with this Google account"})})]}),"#enter-passphrase"===W.hash&&Object(A.jsxs)("div",{className:"section full mt-2 mb-3",children:[Object(A.jsx)("div",{className:"wide-block p-2",children:Object(A.jsx)("div",{className:"section full",children:Object(A.jsxs)("div",{className:"form-group boxed",children:[Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("input",{type:"text",value:w,onChange:function(e){return function(e){p(null);var t=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{10,})"),n=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})");t.test(e)?T("Strong"):n.test(e)?T("Medium"):T("Weak"),y(e)}(e.target.value)},className:"form-control",placeholder:"Backup Passpharse",ref:s}),Object(A.jsx)("i",{className:"clear-input",children:Object(A.jsx)(_.IoCloseCircle,{className:"ion-icon"})})]}),Object(A.jsx)("div",{className:"mt-1",children:Object(A.jsxs)("small",{children:["Passphrase length: ",Object(A.jsx)("b",{children:w.length}),". Strength:"," ",Object(A.jsx)("b",{children:E}),Object(A.jsx)("br",{}),"A strong passphrase should be at least 10-charater long and contain at least one lowercase alphabet, one uppercase alphabet, one number and a special character"]})})]})})}),Object(A.jsx)("div",{className:"text-center mt-3",children:w.length>9&&Object(A.jsx)("button",{className:"btn btn-primary",onClick:function(e){return Q()},children:"Continue to backup your wallet"})})]}),"#process"===W.hash&&Object(A.jsxs)("div",{className:"section full mt-2",children:[Object(A.jsx)("div",{className:"text-center",style:{marginTop:100},children:Object(A.jsx)("h4",{className:"subtitle",children:R.message})}),Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{className:"progress",style:{margin:"50px 80px 3px"},children:Object(A.jsx)("div",{className:"progress-bar",style:{width:"".concat(R.percent,"%")},role:"progressbar","aria-valuenow":25,"aria-valuemin":0,"aria-valuemax":100})}),Object(A.jsx)("div",{className:"text-center",children:Object(A.jsx)("small",{className:"text-success message"})}),Object(A.jsx)("div",{className:"text-center",children:R.showHome&&Object(A.jsx)(i.b,{to:"/",className:"btn btn-primary btn-home mt-3",children:"Go to Home"})})]})]})]}),o&&Object(A.jsx)("div",{className:"text-center",children:Object(A.jsxs)("span",{className:"text-danger",children:[Object(A.jsx)("b",{children:"Error"}),": ",o]})})]})}var qe=function(){var e=Object(a.useContext)(C),t=e.initApp,n=e.wallet;return Object(a.useEffect)((function(){Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)})))()}),[t]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(te,{}),Object(A.jsxs)(l.d,{children:[Object(A.jsx)(l.b,{exact:!0,path:"/",component:ue}),Object(A.jsx)(P,{exact:!0,path:"/backup",component:G,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/networks",component:de,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/import-token",component:re,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/select-token",component:le,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/profile",component:je,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/settings",component:pe,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/assets",component:ge,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/assets/:address",component:we,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/transfer/:contract",component:xe,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/transfer/:contract/:address",component:xe,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/vault",component:We,wallet:n}),Object(A.jsx)(P,{exact:!0,path:"/google/backup",component:Je,wallet:n}),Object(A.jsx)(l.b,{path:"*",component:ue})]}),Object(A.jsx)(ee,{})]})},Xe=x.APP_CONSTANTS.PASSCODE_LENGTH;function Ze(){var e=Object(a.useContext)(C),t=(e.hasWallet,e.setWallet),n=(e.network,e.wallet,Object(l.g)()),s=Object(a.useState)(!1),c=Object(b.a)(s,2),r=c[0],o=c[1],j=Object(a.useState)(""),p=Object(b.a)(j,2),m=p[0],h=p[1],f=Object(a.useState)(""),x=Object(b.a)(f,2),O=x[0],v=x[1],g=Object(a.useState)(!1),w=Object(b.a)(g,2),y=w[0],N=w[1],S=Object(a.useState)("Creating your new wallet. Please wait..."),E=Object(b.a)(S,2),T=E[0],I=(E[1],Object(a.useState)(null)),P=Object(b.a)(I,2),R=P[0],M=P[1],D=Object(a.useRef)(null),B=function(){h(""),v("")},U=function(e){M(e)},z=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,v(a),a.length!==Xe){e.next=17;break}if(a===m){e.next=7;break}return B(),F.a.fire("Error","Passcodes do not match. Please try another passcode.","error").then((function(e){D.current.focus()})),e.abrupt("return");case 7:if("restore_mnemonic"!==R){e.next=11;break}return e.next=10,k.save("temp_passcode",a);case 10:n.push("/mnemonic/restore");case 11:if("restore_gdrive"!==R){e.next=15;break}return e.next=14,k.save("temp_passcode",a);case 14:n.push("/google/restore");case 15:return"create_wallet"===R&&o(!0),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(u.a.mark((function e(){var a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(null),N(!0),e.next=5,L.create(m);case 5:if(!(a=e.sent)){e.next=12;break}return s=a.wallet,c=a.encryptedWallet,e.next=10,k.save("temp_encryptedWallet",c);case 10:t(s),n.push("/create");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),F.a.fire("ERROR",e.t0.message,"error");case 17:return e.prev=17,N(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{className:"appHeader bg-primary text-light",children:[Object(A.jsx)("div",{className:"left"}),Object(A.jsx)("div",{className:"pageTitle",children:"Rumsan Wallet"})]}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsx)("div",{className:"section wallet-card-section pt-1",children:Object(A.jsx)("div",{className:"card",style:{height:380,paddingTop:50,paddingLeft:5,paddingRight:5},children:Object(A.jsx)("div",{className:"balance",children:Object(A.jsxs)("div",{className:"",children:[Object(A.jsxs)("div",{style:{paddingLeft:20,paddingRight:20},children:[Object(A.jsx)("h2",{className:"value",children:"Let's setup your wallet"}),Object(A.jsx)("span",{className:"title",children:"Please choose one of the options to setup your wallet."})]}),Object(A.jsxs)("div",{className:"card-body",children:[Object(A.jsxs)("button",{onClick:function(){return U("create_wallet")},id:"btnSetupWallet",type:"button",className:"btn btn-lg btn-block btn-success",children:[Object(A.jsx)(_.IoWalletOutline,{className:"ion-icon","aria-label":"Create New Wallet"}),"Create new wallet"]}),Object(A.jsx)("div",{className:"mt-2"}),Object(A.jsxs)("button",{onClick:function(){return U("restore_mnemonic")},id:"btnSetupWallet",type:"button",className:"btn btn-lg btn-block",style:{backgroundColor:"#1E74FD",borderColor:"#1E74FD",color:"#ffffff"},children:[Object(A.jsx)(_.IoWalletOutline,{className:"ion-icon","aria-label":"Restore Existing Wallet"}),"Restore from seed phrase (mnemonic)"]}),Object(A.jsx)("div",{className:"mt-2"}),Object(A.jsxs)("button",{onClick:function(){return U("restore_gdrive")},id:"btnSetupWallet",type:"button",className:"btn btn-lg btn-block btn-danger mb-2",children:[Object(A.jsx)(_.IoLogoGoogle,{className:"ion-icon","aria-label":"Restore Using Google"}),"Restore wallet Google Drive"]})]})]})})})})}),Object(A.jsx)(H,{message:T,showModal:y}),Object(A.jsxs)(W,{title:"First, let's setup your passcode",showModal:null!==R,onShow:function(){return D.current.focus()},onHide:function(){return o(!1)},children:[r&&"create_wallet"===R?Object(A.jsx)("div",{className:"p-2",children:Object(A.jsxs)("button",{onClick:K,id:"btnNewWallet",type:"button",className:"btn btn-lg btn-block btn-primary",children:[Object(A.jsx)(_.IoWalletOutline,{className:"ion-icon","aria-label":"Create New Wallet"}),"Create a new Rumsan Wallet"]})}):Object(A.jsx)("div",{className:"row mb-3",children:Object(A.jsxs)("div",{className:"col",children:[Object(A.jsxs)("p",{children:["Choose a ",Xe,"-digit passcode."]}),m.length<Xe&&Object(A.jsx)("input",{onChange:function(e){h(e.target.value)},type:"text",ref:D,pattern:"[0-9]*",inputMode:"numeric",className:"form-control verify-input passcode pwd",placeholder:"------",maxLength:Xe,autoComplete:"false",value:m}),m&&m.length===Xe&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("input",{autoFocus:!0,onChange:z,type:"text",pattern:"[0-9]*",inputMode:"numeric",className:"form-control verify-input passcode pwd",placeholder:"------",maxLength:Xe,autoComplete:"false",value:O}),Object(A.jsx)("div",{className:"text-center",children:Object(A.jsx)("small",{className:"message",children:"Please confirm your passcode"})})]})]})}),Object(A.jsx)("div",{className:"text-center mt-3",children:Object(A.jsx)(i.b,{to:"#",onClick:function(){return B(),o(!1),void M(null)},children:Object(A.jsx)("small",{children:"Start Over"})})})]})]})}var $e=x.APP_CONSTANTS.PASSCODE_LENGTH;function et(){var e=Object(a.useContext)(C).setWallet,t=Object(l.g)(),n=Object(a.useState)(""),s=Object(b.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(!1),o=Object(b.a)(i,2),j=o[0],p=o[1],m=Object(a.useState)(!1),h=Object(b.a)(m,2),f=h[0],x=h[1],O=function(){var n=Object(d.a)(u.a.mark((function n(a){var s,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.getWallet();case 3:return s=n.sent,n.next=6,L.loadFromJson(a,s);case 6:c=n.sent,e(c),p(!1),t.push("/"),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(0),r(""),x(!0),p(!1);case 17:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H,{message:"Unlocking your wallet. Please wait...",showModal:j}),Object(A.jsxs)("div",{className:"login-form",id:"cmpUnlock",style:{marginTop:80},children:[Object(A.jsxs)("div",{className:"section",children:[Object(A.jsx)("h1",{children:"Wallet Locked"}),Object(A.jsx)("h4",{children:"Please enter your 6-digit code to unlock"})]}),Object(A.jsx)("div",{className:"section mt-2 mb-5",children:Object(A.jsx)("div",{className:"form-group boxed",children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("input",{onChange:function(e){var t=e.target.value;r(t),t.length===$e&&(p(!0),O(t))},type:"text",pattern:"[0-9]*",inputMode:"numeric",className:"form-control verify-input pwd",id:"unlockCode",placeholder:"------",maxLength:6,value:c,style:{color:"green"}}),Object(A.jsx)("div",{className:"text-center",children:f&&Object(A.jsx)("small",{className:"text-danger message",children:"Passcode did not match. Please enter correct passcode"})})]})})})]})]})}var tt=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];function nt(){var e,t=Object(l.g)(),n=null,s=[{hash:"#choose-account",label:"Please choose Google account. Please click the switch account button to change account."},{hash:"#choose-wallet",label:"Please select the wallet you wish to restore."},{hash:"#enter-passphrase",label:"Please enter backup passphrase."}],c=Object(a.useContext)(C).setWallet,r=Object(a.useState)(null),o=Object(b.a)(r,2),j=o[0],p=o[1],m=Object(a.useState)(null),h=Object(b.a)(m,2),f=h[0],O=h[1],v=Object(a.useState)({id:null,name:"Loading Users...",email:null,image:Le}),g=Object(b.a)(v,2),w=g[0],y=g[1],N=Object(a.useState)(""),S=Object(b.a)(N,2),E=S[0],T=S[1],I=Object(a.useState)([]),P=Object(b.a)(I,2),R=P[0],M=P[1],D=Object(a.useState)({}),B=Object(b.a)(D,2),W=B[0],U=B[1],z=Object(a.useState)({}),K=Object(b.a)(z,2),G=K[0],V=K[1],Q=function(e){O(null);var t=s.find((function(t){return t.hash===e}));V(t||s.find((function(e){return"#choose-account"===e.hash})))},Y=function(){Ue.a.client.init({clientId:"1037282848942-iorpo75krbdj1p40rqncs1i8504lgger.apps.googleusercontent.com",discoveryDocs:tt,ux_mode:"redirect",scope:"profile email https://www.googleapis.com/auth/drive",redirect_uri:"".concat("https://wallet.dev.rumsan.net/google","/restore")}).then((function(){Ue.a.auth2.getAuthInstance().isSignedIn.listen(J),J(Ue.a.auth2.getAuthInstance().isSignedIn.get())})).catch((function(e){console.log(e),F.a.fire("Warning","You have blocked third-party cookies for this site or app. You must allow them for Google login to work.","warning").then((function(e){t.push("/")}))}))},J=function(e){if(e){var t=Ue.a.auth2.getAuthInstance().currentUser.get().getBasicProfile();y({id:t.getId(),name:t.getName(),email:t.getEmail(),image:t.getImageUrl()})}else q()},q=function(){return Ue.a.auth2.getAuthInstance().signIn()},X=function(){var e=Object(d.a)(u.a.mark((function e(){var n,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getWallet();case 2:if(!e.sent){e.next=6;break}return F.a.fire("Warning","You have already setup a wallet. Please backup and remove it before restoring another wallet from Google Drive.","warning").then((function(e){t.push("/")})),e.abrupt("return");case 6:return t.push("#choose-wallet"),p("Querying Google Drive for wallet backups. Please wait..."),n=new Qe(Ue.a),a=new Ve(Ue.a),e.next=12,n.ensureExists(x.BACKUP.GDRIVE_FOLDERNAME);case 12:return s=e.sent,e.next=15,a.listFiles(s.id);case 15:c=e.sent,M(c),p(null);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(u.a.mark((function e(){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(null),p("Fetching wallet data. Please wait..."),e.prev=2,a=new Ve(Ue.a),e.next=6,a.downloadFile(W.id);case 6:if(s=e.sent,(n=JSON.parse(s)).name){e.next=10;break}throw Error("Not a valid wallet. Please select another wallet.");case 10:U(Object.assign(W,{data:n})),t.push("#enter-passphrase"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),O("Not a valid wallet. Please select another wallet."===e.t0.message?e.t0.message:"Issue fetching wallet. Are you sure you selected a right wallet? Please check and try again."),U({});case 18:p(null);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(d.a)(u.a.mark((function e(){var n,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(null),p("Unlocking and restoring wallet."),e.prev=2,e.next=5,k.get("temp_passcode");case 5:return n=e.sent,e.next=8,L.loadFromJson(E,W.data.wallet);case 8:return a=e.sent,e.next=11,a.encrypt(n);case 11:return s=e.sent,e.next=14,k.clearAll();case 14:return e.next=16,k.saveWallet(s);case 16:return e.next=18,k.saveAddress(a.address);case 18:return e.next=20,k.save("backup_wallet",W.data.wallet);case 20:if(!W.data.documents){e.next=23;break}return e.next=23,k.saveDocuments(W.data.documents);case 23:if(!W.data.assets){e.next=26;break}return e.next=26,k.addMultiAssets(W.data.assets);case 26:return c(a),e.next=29,k.remove("temp_passcode");case 29:t.push("/"),e.next=37;break;case 32:e.prev=32,e.t0=e.catch(2),console.log(e.t0),T(""),O("Backup passphrase is incorrect. Please try again.");case 37:p(null);case 38:case"end":return e.stop()}}),e,null,[[2,32]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t.listen((function(e){Q(e.hash)})),Q(t.location.hash),Ue.a.load("client:auth2",Y)}),[]),Object(A.jsxs)("div",{id:"appCapsule",children:[Object(A.jsx)(H,{message:j,showModal:j}),Object(A.jsxs)("div",{className:"appHeader bg-success text-light",children:[Object(A.jsx)("div",{className:"left",children:""!==t.location.hash&&Object(A.jsx)("button",{href:"#",className:"headerButton btn",onClick:function(e){return function(e){if("POP"===t.action)return t.push("/google/restore");t.goBack()}()},children:Object(A.jsx)(_.IoChevronBackOutline,{className:"ion-icon"})})}),Object(A.jsx)("div",{className:"pageTitle",children:"Restore wallet from Google Drive"}),Object(A.jsx)("div",{className:"right",children:Object(A.jsx)(i.b,{to:"/",className:"headerButton",children:Object(A.jsx)(_.IoHomeOutline,{className:"ion-icon"})})})]}),Object(A.jsxs)("div",{style:{marginTop:80},children:[Object(A.jsxs)("div",{className:"section",children:[Object(A.jsx)("h2",{children:"Restore Wallet from Google Drive"}),Object(A.jsx)("h4",{children:G.label})]}),"#choose-account"===G.hash&&Object(A.jsxs)("div",{className:"text-center section full mt-2 mb-3",children:[Object(A.jsxs)("div",{className:"text-center wide-block p-3",children:[Object(A.jsx)("div",{className:"avatar",children:Object(A.jsx)("img",{src:w.image,alt:"avatar",className:"imaged w64 rounded"})}),Object(A.jsxs)("div",{className:"in mt-1",children:[Object(A.jsx)("h3",{className:"name",children:w.name}),Object(A.jsx)("h5",{className:"subtext",style:{margin:-3},children:w.email})]}),w.id&&Object(A.jsx)("button",{className:"btn btn-sm btn-outline-secondary mt-2",id:"btnMnemonic",onClick:function(e){return q()},children:"Switch account"})]}),w.id&&Object(A.jsx)("div",{className:"text-center mt-3",children:Object(A.jsx)("button",{className:"btn btn-primary",id:"btnMnemonic",onClick:function(e){return X()},disabled:j?"true":"",children:"Continue wallet restore for selected user"})})]}),"#choose-wallet"===G.hash&&Object(A.jsxs)("div",{className:"section full mt-2 mb-3",children:[Object(A.jsx)("div",{className:"wide-block p-0",children:Object(A.jsx)("div",{className:"input-list",children:R.length?R.map((function(e){return Object(A.jsxs)("div",{className:"custom-control custom-radio",children:[Object(A.jsx)("input",{type:"radio",id:e.id,name:"walletList",className:"custom-control-input",value:e.id,checked:W.id===e.id,onChange:function(t){O(null),U(e)}}),Object(A.jsx)("label",{className:"custom-control-label",htmlFor:e.id,children:e.name})]},e.id)})):(e="There are no wallet backed up in your Google Drive.",j?Object(A.jsx)("div",{className:"text-center p3",children:"Loading..."}):Object(A.jsx)("div",{className:"text-center p-3",children:e}))})}),Object(A.jsx)("div",{className:"text-center mt-3",children:W.id&&Object(A.jsx)("button",{className:"btn btn-primary",id:"btnMnemonic",onClick:function(e){return Z()},disabled:j?"true":"",children:"Continue with selected wallet"})})]}),"#enter-passphrase"===G.hash&&Object(A.jsxs)("div",{className:"section full mt-2 mb-3",children:[!W.id&&Object(A.jsx)(l.a,{to:"/google/restore#choose-account"}),Object(A.jsx)("div",{className:"wide-block p-2",children:Object(A.jsx)("div",{className:"section full",children:Object(A.jsx)("div",{className:"form-group boxed",children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsx)("input",{type:"text",value:E,onChange:function(e){return T(e.target.value)},className:"form-control pwd",placeholder:"Backup Passpharse"}),Object(A.jsx)("i",{className:"clear-input",children:Object(A.jsx)(_.IoCloseCircle,{className:"ion-icon"})})]})})})}),Object(A.jsx)("div",{className:"text-center mt-3",children:E.length>4&&Object(A.jsx)("button",{className:"btn btn-primary",id:"btnMnemonic",onClick:function(e){return $()},disabled:j?"true":"",children:"Unlock and restore wallet"})})]})]}),f&&Object(A.jsx)("div",{className:"text-center",children:Object(A.jsxs)("span",{className:"text-danger",children:[Object(A.jsx)("b",{children:"Error"}),": ",f]})})]})}function at(){var e=Object(l.g)(),t=Object(a.useContext)(C).wallet,n=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.fire({title:"Success",icon:"success",html:"Would you like to backup your wallet in Google Drive",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Backup",cancelButtonText:"No, Take to homepage"});case 2:t.sent.value?e.push("/google/backup"):e.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("temp_encryptedWallet");case 2:return a=e.sent,e.next=5,k.saveWallet(a);case 5:return k.remove("temp_encryptedWallet"),k.remove("temp_passcode"),k.saveAddress(t.address),e.abrupt("return",n());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsxs)("div",{className:"section full mt-2",children:[Object(A.jsx)("div",{className:"section-title",style:{fontSize:"larger"},children:"Please save this 12 word mnemonic safely."}),Object(A.jsx)("div",{className:"content-header mb-05",children:Object(A.jsx)("div",{className:"row",children:null!=t?t.mnemonic.phrase.split(" ").map((function(e,t){return Object(A.jsx)("div",{className:"col-sm-3",children:Object(A.jsx)("div",{className:"form-group boxed",children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsxs)("label",{className:"label",children:["\xa0word: ",t+1]}),Object(A.jsx)("input",{type:"text",className:"form-control",name:"".concat(e).concat(t+1),defaultValue:e,readOnly:!0})]})})},t)})):Object(A.jsx)("div",{className:"col-sm-3",children:"No mnemonics found"})})}),Object(A.jsxs)("div",{className:"text-center mt-3",children:[null!=t&&Object(A.jsx)("button",{onClick:s,style:{margin:5},className:"btn btn-success btn-md",id:"btnMnemonic",children:"I have written it down"}),Object(A.jsx)("button",{onClick:function(e){e.preventDefault(),window.location.replace("/")},className:"btn btn-danger btn-md",id:"btnCancel",children:"Cancel"})]})]})})}function st(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.fire({title:"Please confirm!!!",input:"text",inputLabel:'This is irreversible. Please type "RUMSAN" without quotes to proceed',inputPlaceholder:""});case 2:if(t=e.sent,"RUMSAN"!==t.value){e.next=10;break}return e.next=7,f.a.delete("db_wallet");case 7:window.location.href="/",e.next=11;break;case 10:F.a.fire("Wrong confirmation","No action was taken");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsxs)("div",{className:"text-center section full mt-2 mb-3",children:[Object(A.jsx)("h1",{className:"mt-5",children:"Rumsan Wallet Reset"}),Object(A.jsx)("div",{children:"This will delete all your data. Please make sure you have backed up your wallet properly."}),Object(A.jsxs)("button",{onClick:function(){return window.location.href="/"},type:"button",className:"btn btn-md btn-success mt-5 mr-3",children:[Object(A.jsx)(_.IoArchiveOutline,{className:"ion-icon"}),"Backup Wallet"]}),Object(A.jsxs)("button",{onClick:function(){return e()},type:"button",className:"btn btn-md btn-danger mt-5",children:[Object(A.jsx)(_.IoTrashOutline,{className:"ion-icon"}),"Reset Rumsan Wallet"]})]})})})}function ct(){var e=Object(l.g)(),t=Object(a.useContext)(C).setWallet,n=Object(a.useState)(!1),c=Object(b.a)(n,2),r=c[0],i=c[1],o=s.a.useRef([]);12!==o.current.length&&(o.current=Array(12).fill().map((function(e,t){return o.current[t]||Object(a.createRef)()})));for(var j=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.fire({title:"Success",icon:"success",html:"Would you like to backup your wallet in Google Drive",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Backup",cancelButtonText:"No, Take to homepage"});case 2:t.sent.value?e.push("/google/backup"):e.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(e){e.preventDefault(),e.clipboardData.getData("text").trim().split(" ").map((function(e,t){return o.current[t]&&(o.current[t].current.value=e),null}))},m=[],h=0;h<12;h++){var f=Object(A.jsx)("div",{className:"col-sm-3",children:Object(A.jsx)("div",{className:"form-group boxed",children:Object(A.jsxs)("div",{className:"input-wrapper",children:[Object(A.jsxs)("label",{className:"label",children:["Word: ",h+1]}),Object(A.jsx)("input",{type:"text",ref:o.current[h],onChange:function(e){},className:"form-control",onPaste:p,name:"word".concat(h+1),required:!0})]})})},h+1);m.push(f)}var x=function(){var e=Object(d.a)(u.a.mark((function e(n){var a,s,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),e.next=4,k.get("temp_passcode");case 4:return a=e.sent,e.next=7,L.create(a,n);case 7:return s=e.sent,c=s.wallet,r=s.encryptedWallet,t(c),k.saveAddress(c.address),e.next=13,k.saveWallet(r);case 13:return k.remove("temp_passcode"),i(!1),e.abrupt("return",j());case 18:e.prev=18,e.t0=e.catch(0),F.a.fire("ERROR",e.t0.message,"error"),i(!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H,{message:"Restoring your wallet. Please wait...",showModal:r}),Object(A.jsx)("div",{id:"appCapsule",children:Object(A.jsxs)("div",{className:"section full mt-2",children:[Object(A.jsx)("div",{className:"section-title",style:{fontSize:"larger"},children:"Please enter 12 word mnemonics"}),Object(A.jsxs)("form",{onSubmit:function(e){e.preventDefault();for(var t=[],n=new FormData(e.target),a=1;a<13;a++){var s=n.get("word".concat(a));t.push(s)}var c=t.join(" ");if(L.isValidMnemonic(c))return x(c);F.a.fire("ERROR","Invalid mnemonic. Please check and try again.","error")},children:[Object(A.jsxs)("div",{className:"content-header mb-05",children:[Object(A.jsx)("p",{children:"One word in each box"}),Object(A.jsx)("div",{className:"row",children:m&&m.map((function(e){return e}))})]}),Object(A.jsxs)("div",{className:"text-center mt-3",children:[Object(A.jsx)("button",{type:"submit",style:{margin:5},className:"btn btn-success btn-md",id:"btnMnemonic",children:"Submit"}),Object(A.jsx)("button",{onClick:function(e){e.preventDefault(),window.location.replace("/")},className:"btn btn-danger btn-md",id:"btnCancel",children:"Cancel"})]})]})]})})]})}var rt=function(){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(E,{children:Object(A.jsx)(i.a,{children:Object(A.jsxs)(l.d,{children:[Object(A.jsx)(l.b,{exact:!0,path:"/setup",component:Ze}),Object(A.jsx)(l.b,{exact:!0,path:"/create",component:at}),Object(A.jsx)(l.b,{exact:!0,path:"/unlock",component:et}),Object(A.jsx)(l.b,{exact:!0,path:"/google/restore",component:nt}),Object(A.jsx)(l.b,{exact:!0,path:"/mnemonic/restore",component:ct}),Object(A.jsx)(l.b,{exact:!0,path:"/reset",component:st}),Object(A.jsx)(l.b,{path:"/",component:qe}),Object(A.jsx)(l.b,{path:"*",component:qe})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,931)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(A.jsx)(rt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),it()}},[[893,1,2]]]);
//# sourceMappingURL=main.751ca611.chunk.js.map